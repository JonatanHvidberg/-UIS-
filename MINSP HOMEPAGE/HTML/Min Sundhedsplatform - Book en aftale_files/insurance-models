(function(){var n=null,i=$$WP.Common.ModelCollection,t=function(n){var t=this;t.WP$Common$Model(n);$$WP.Utilities.IsNullOrEmpty(t.CoverageId)?$$WP.Utilities.IsNullOrEmpty(t.Index)||(t.ID="NEW^"+t.Index):t.ID="CVG^"+t.CoverageId;t.HasExpiringDocuments=!1;n.FrontDocument&&(t.FrontDocument=new $$WP.Insurance.CoverageDocument(n.FrontDocument),t.FrontDocument.IsFront=!0,t.HasExpiringDocuments=t.HasExpiringDocuments||t.FrontDocument.NeedsVerification);n.BackDocument&&(t.BackDocument=new $$WP.Insurance.CoverageDocument(n.BackDocument),t.HasExpiringDocuments=t.HasExpiringDocuments||t.BackDocument.NeedsVerification);t.SubscriberName&&(t.SubscriberName=t.SubscriberName.replace(/,/g,", "));t.MemberName&&(t.MemberName=t.MemberName.replace(/,/g,", "))},r={s_dataMembers:["CoverageId","Index","Status","CoverageType","PayorId","PayorName","PlanName","SubscriberId","SubscriberName","SubscriberFirstName","SubscriberLastName","SubscriberDateOfBirth","MemberId","MemberName","GroupNumber","Comments","PatientIsSubscriber"],ID:n,CoverageId:n,Index:n,Status:n,CoverageType:n,PayorId:n,PayorName:n,PlanName:n,SubscriberId:n,SubscriberName:n,SubscriberFirstName:n,SubscriberLastName:n,SubscriberDateOfBirth:n,MemberId:n,MemberName:n,GroupNumber:n,Comments:n,PatientIsSubscriber:n,FrontDocument:n,BackDocument:n},u=function(i,r){for(var h="undefined",u,s,e,o=[],f=0;f<i.length;f++)(u=i[f],typeof u=="object"&&(typeof u.CoverageId!==h||typeof u.Index!==h))&&(e=new t(u),s=r.getFromIndex("ID",e.ID),s===n?(r.add(e),o.push(e)):o.push(s));return o},f=function(){return new i(e,o)},e=[{propertyNames:"ID",storeAs:"single"}],o=[];t.prototype=r;t.convertRawCoverages=u;t.createCoverageCollection=f;$$WP.Insurance=$$WP.Insurance||{};$$WP.Insurance.Coverage=t;t.extend($$WP.Common.Model,"WP$Insurance$Coverage")})(),function(){var t=null,i=$$WP.Common.ModelCollection,n=function(n){this.WP$Common$Model(n)},r={s_dataMembers:["ID","Name","Fields","SampleCardImages","CanUpload"],ID:t,Name:t,Fields:t,SampleCardImages:t,CanUpload:!1},u=function(i,r){for(var u,f,o=[],e=0;e<i.length;e++)(u=i[e],typeof u=="object"&&typeof u.ID!="undefined")&&(f=r.getFromIndex("ID",u.ID),f===t&&(f=new n(u),r.add(f)),o.push(f));return o},f=function(){return new i(e,o)},e=[{propertyNames:"ID",storeAs:"single"}],o=[];n.prototype=r;n.convertRawPayors=u;n.createPayorCollection=f;$$WP.Insurance=$$WP.Insurance||{};$$WP.Insurance.Payor=n;n.extend($$WP.Common.Model,"WP$Insurance$Payor")}(),function(){var n="Insurance",t=null,i=function(n,t,i,f){var e=this;n&&(e.DefaultUploadConfig=n,e.DefaultUploadConfig.ViewTemplate=$$WP.Templates.Insurance.SingleUploadContainer,e.DefaultUploadConfig.UploadCardTemplate=$$WP.Templates.Insurance.AddFileCard,e.CoreFrontUploadConfig=new $$WP.Upload.Models.UploadConfiguration(e.DefaultUploadConfig),e.CoreBackUploadConfig=new $$WP.Upload.Models.UploadConfiguration(e.DefaultUploadConfig),e.CoreFrontUploadConfig.DeleteUrl=u,e.CoreFrontUploadConfig.UploadUrl=r,e.CoreBackUploadConfig.DeleteUrl=u,e.CoreBackUploadConfig.UploadUrl=r,e.CoreFrontUploadConfig.Action=t,e.CoreBackUploadConfig.Action=t,e._setupPromptStrings(i,f),$$WP.Utilities.UI.IsMobile||e._setupHelpTextStrings());e.FrontControllerDocuments=[];e.BackControllerDocuments=[]},r,u;i.prototype={DefaultUploadConfig:t,CoreFrontUploadConfig:t,CoreBackUploadConfig:t,FrontControllerDocuments:t,BackControllerDocuments:t,_setupPromptStrings:function(t,i){var r=this;t?(r.CoreFrontUploadConfig.PromptOverride=$$WP.Strings.get("UploadReplacePromptFront",n),r.CoreFrontUploadConfig.ScreenReaderLabel=$$WP.Strings.get("ReplaceFrontCardTooltip",n)):(r.CoreFrontUploadConfig.PromptOverride=$$WP.Strings.get("UploadAddPromptFront",n),r.CoreFrontUploadConfig.ScreenReaderLabel=$$WP.Strings.get("AddFrontCardTooltip",n));i?(r.CoreBackUploadConfig.PromptOverride=$$WP.Strings.get("UploadReplacePromptBack",n),r.CoreBackUploadConfig.ScreenReaderLabel=$$WP.Strings.get("ReplaceBackCardTooltip",n)):(r.CoreBackUploadConfig.PromptOverride=$$WP.Strings.get("UploadAddPromptBack",n),r.CoreBackUploadConfig.ScreenReaderLabel=$$WP.Strings.get("AddBackCardTooltip",n))},_setupHelpTextStrings:function(){var r="@MYCHART@DOCUMENTTYPEHELPTEXT@",i=this,u=i.CoreFrontUploadConfig.AllowedImageAndDocumentExtensions;$$WP.Strings.setDefaultNamespace(n);$$WP.Strings.addMnemonic("@MYCHART@DOCUMENTTYPESLIST@",u.join($$WP.Strings.get("listSeparator",n)),!1,t,$$WP.Strings.EncodingTypes.None);$$WP.Strings.addMnemonic("@MYCHART@ALLOWEDIMAGESIZE@",Math.floor(i.CoreFrontUploadConfig.MaxAllowedImageSize*10/1024)/10);u.length===1?$$WP.Strings.addMnemonic(r,$$WP.Strings.get("UploadCardHelpTextSingleType",n)):$$WP.Strings.addMnemonic(r,$$WP.Strings.get("UploadCardHelpTextMultipleTypes",n));i.CoreBackUploadConfig.HelpText=i.CoreFrontUploadConfig.HelpText=$$WP.Strings.get("UploadCardHelpText",n);i.CoreBackUploadConfig.HelpTextFileSize=i.CoreFrontUploadConfig.HelpTextFileSize=$$WP.Strings.get("UploadCardHelpTextFileSize",n);$$WP.Strings.clearDefaultNamespace()},clearDocuments:function(){this.FrontControllerDocuments=[];this.BackControllerDocuments=[]},editContextData:function(t){this.CoreFrontUploadConfig.ContextData={Description:t+" "+$$WP.Strings.get("UploadCardFrontIndicator",n)};this.CoreBackUploadConfig.ContextData={Description:t+" "+$$WP.Strings.get("UploadCardBackIndicator",n)}},getDocuments:function(){return this.FrontControllerDocuments.concat(this.BackControllerDocuments)},canUseUploadFeature:function(){var n=this.DefaultUploadConfig;return!$$WP.Utilities.IsNullOrEmpty(n)&&n.AllowedImageAndDocumentExtensions.length>0&&n.MaxAllowedImageSize>0}};r=makeLink("Insurance/UploadCoverage/UploadFile");u=makeLink("Insurance/UploadCoverage/DeleteFile");$$WP.Insurance=$$WP.Insurance||{};$$WP.Insurance.UploadCoverageDataPool=i;i.extend($$WP.BaseObject,"WP$Insurance$UploadCoverageDataPool")}(),function(){var u="[data-id='",i="Insurance",n=!1,t,f,e,r;$$WP.Utilities.guaranteeExistence($$WP,"Upload.Models.Document");t=function(n){var t=this;t.WP$Upload$Models$Document(n);t.NeedsVerification=n.NeedsVerification;t._docModel=new $$WP.Documents.ViewDocument.Models.DocumentModel(null,{},encodeURIComponent(t.FileReference),encodeURIComponent(t.DocumentId),t.FileDisplayName,t.FileExtensionWithoutDot)};f={NeedsVerification:n,_image:null,_docModel:null,HasNoPreview:n,IsFront:n,get FileImageIconClass(){var n="file-type-icon--unknown";return this.FileExtension&&(n=this.FileExtension.substr(this.FileExtension.lastIndexOf(".")+1),n=n.toLowerCase(),n="file-type-icon--"+n),n},get FileExtensionWithoutDot(){var n="";return this.FileExtension&&(n=this.FileExtension.substr(this.FileExtension.lastIndexOf(".")+1),n=n.toUpperCase()),n},get FileUrl(){return this._docModel.Url},get NoPreviewString(){var t="ClickToDownloadPrintCardText",n=$$WP.Strings.get("CardPreviewNotAvailableText",i);if(!$$WP.Utilities.UI.IsMobile)switch(this.FileExtensionWithoutDot){case"DOC":case"DOCX":case"PDF":case"TIFF":case"TIF":n=n+" "+$$WP.Strings.get(t,i);break;default:n=n+" "+$$WP.Strings.get(t,i)}return n},drawImage:function(){var n=this;n.IsImageFileType()?r<e?(r++,n._image=new Image,n._image.onload=$.proxy(n._onImageLoad,n),n._image.onerror=$.proxy(n._drawNoPreview,n),n._image.src=n.FileUrl):setTimeout($.proxy(function(){this.drawImage()},n),200):n._drawNoPreview(!0)},_onImageLoad:function(){var t=this,e,o,f;r--;t.HasNoPreview=n;o=$afe.select(u+t.DocumentId+"']");f=$afe.jq(t._image);f.addClass("image");e=t.IsFront?$$WP.Strings.get("InsuranceCardAltTextFront",i):$$WP.Strings.get("InsuranceCardAltTextBack",i);f.safeAttr("alt",e);o.empty().safeAppend(f)},_drawNoPreview:function(n){n||r--;var t;this.HasNoPreview=!0;t=$afe.select(u+this.DocumentId+"']");t.find(".loadingimage").remove();t.find(".nopreview").removeClass("hidden")},openAsPopup:function(t){var i=this,r;t&&(i.FileExtensionWithoutDot=="TIF"||i.FileExtensionWithoutDot=="TIFF")&&(i._docModel.AllowPreview=n);r="coverageViewDocument sm-autosizedpopup";i._docModel.openAsPopup(r);$afe.select(".coverageViewDocument .downloadIcon").click(function(t){var r="coverageViewDocument-downloadFrame",u=$afe.jq(t.currentTarget).closest("a[href]").safeAttr("href").trim()||"",i;return u.length>0&&(i=$afe.select("iframe#coverageViewDocument-downloadFrame"),i&&i.length!==0||(i=$afe.jq(document.createElement("iframe")),i.safeAttr("name",r),i.safeAttr("id",r),i.prop("width","0"),i.prop("height","0"),$afe.jq(document.body).safeAppend(i)),i.prop("src",u)),t.stopPropagation(),t.preventDefault(),n});$afe.select(".coverageViewDocument .printIcon").click($.proxy(i._docModel.PrintClicked,i._docModel))}};t.parseArray=function(n){var r=[],i;if($.isArray(n))for(i=0;i<n.length;++i)r.push(new t(n[i]));return r};e=3;r=0;t.prototype=f;$$WP.Insurance=$$WP.Insurance||{};$$WP.Insurance.CoverageDocument=t;t.extend($$WP.Upload.Models.Document,"WP$Insurance$CoverageDocument")}(),function(){var r="viewdocument",n=!0,i=!1,t=null,f,u;$$WP.Utilities.guaranteeExistence($$WP,"Documents.ViewDocument.Models");f=$$WP.Documents.ViewDocument.Models;u=function(n,t,i,r){var u=this;n||(n={});u.AcceptedDocuments=[];u.PendingDocuments=[];u.RejectedDocuments=[];u.Documents=[];u.WP$Common$Model(n);u.SeparateByStatus=t;u.ShowPendingAndRejected=i;u.SetOverrideTitles(r)};u.prototype={Title:"Document List",s_dataMembers:[],Documents:t,Template:t,Error:t,NoData:i,SeparateByStatus:i,ShowPendingAndRejected:n,AcceptedDocumentsTitle:$$WP.Strings.getNamespace(r).getString("acceptedDocumentsTitle"),AcceptedDocumentsHelpText:t,PendingDocumentsTitle:$$WP.Strings.getNamespace(r).getString("pendingDocumentsTitle"),PendingDocumentsHelpText:t,RejectedDocumentsTitle:$$WP.Strings.getNamespace(r).getString("rejectedDocumentsTitle"),RejectedDocumentsHelpText:t,AllDocumentsTitle:$$WP.Strings.getNamespace(r).getString("allDocumentsTitle"),addDocument:function(n){this.Documents.push(n)},populateSubLists:function(){var t=this,f=0,e=0,o=0,u,r;if(t.NoPendingDocumentsData=i,t.NoRejectedDocumentsData=i,t.NoAcceptedDocumentsData=i,t.PendingDocuments=[],t.RejectedDocuments=[],t.AcceptedDocuments=[],t.SeparateByStatus)for(u=0;u<t.Documents.length;u++)r=t.Documents[u],r.PendingApproval?(r.Filtered&&f++,t.PendingDocuments.push(r)):r.Rejected?(r.Filtered&&o++,t.RejectedDocuments.push(r)):(r.Filtered&&e++,t.AcceptedDocuments.push(r));(t.PendingDocuments.length===0||f===t.PendingDocuments.length)&&(t.NoPendingDocumentsData=n);(t.RejectedDocuments.length===0||o===t.RejectedDocuments.length)&&(t.NoRejectedDocumentsData=n);(t.AcceptedDocuments.length===0||e===t.AcceptedDocuments.length)&&(t.NoAcceptedDocumentsData=n)},checkForNoData:function(){var t=this;t.AcceptedDocuments.length%2==1&&(t.AcceptedDocuments[t.AcceptedDocuments.length-1].Final=n);t.PendingDocuments.length%2==1&&(t.PendingDocuments[t.PendingDocuments.length-1].Final=n);t.RejectedDocuments.length%2==1&&(t.RejectedDocuments[t.RejectedDocuments.length-1].Final=n);t.Documents.length===0&&(t.NoDocumentsData=n)},SetOverrideTitles:function(n){var t=this;n.AllDocumentsTitle&&(t.AllDocumentsTitle=n.AllDocumentsTitle);n.AcceptedDocumentsTitle&&(t.AcceptedDocumentsTitle=n.AcceptedDocumentsTitle);n.PendingDocumentsTitle&&(t.PendingDocumentsTitle=n.PendingDocumentsTitle);n.RejectedDocumentsTitle&&(t.RejectedDocumentsTitle=n.RejectedDocumentsTitle);n.DocumentWidgetHelpText&&(t.AcceptedDocumentsHelpText=n.DocumentWidgetHelpText);n.PendingDocumentsHelpText&&(t.PendingDocumentsHelpText=n.PendingDocumentsHelpText);n.RejectedDocumentsHelpText&&(t.RejectedDocumentsHelpText=n.RejectedDocumentsHelpText)}};$$WP.Documents.ViewDocument.Models.DocumentListModel=u;u.extend($$WP.Common.Model,"WP$Documents$ViewDocument$Models$DocumentWidgetModel")}(),function(){var i=!0,n=!1,f="ViewDocument",t=null,u,r;$$WP.Utilities.guaranteeExistence($$WP,"Documents.ViewDocument.Models");u=$$WP.Documents.ViewDocument.Models;r=function(n,t,i){var r=this;n||(n={},n.TemplateMode=templateMode,n.PendingAndRejectedSettings=i,n.StringOverrides=t);r.DocumentDates=[];r.DocumentTypes=[];r.WP$Common$Model(n);r.setPendingAndRejectedSettings(n.PendingAndRejectedSettings)};r.prototype={s_dataMembers:["StringOverrides","HideWidgetIfEmpty"],StringNamespace:$$WP.Strings.getNamespace("viewdocument"),DocumentList:t,DocumentDates:t,DocumentTypes:t,Title:$$WP.Strings.get("title",f),HelpBubbleText:$$WP.Strings.get("helpBubbleText",f),Error:n,SeparatePendingAndRejected:i,ShowPendingAndRejected:i,StringOverrides:{},SelectedDate:t,SelectedDocType:t,HasRejectedDocuments:n,HideWidgetIfEmpty:n,setDocumentList:function(r){var f=this,o;for(f.DocumentList===t&&(f.DocumentList=new u.DocumentListModel({},f.SeparatePendingAndRejected,f.ShowPendingAndRejected,f.StringOverrides)),o=0;o<r.length;o++){var h=n,s=r[o],e=new u.DocumentModel(s,f.StringOverrides);f.HasRejectedDocuments===n&&e.Rejected===i&&(f.HasRejectedDocuments=i);f.DocumentList.addDocument(e);$.inArray(e.Date,f.DocumentDates)===-1&&f.DocumentDates.push(e.Date);$.inArray(e.DocType,f.DocumentTypes)===-1&&f.DocumentTypes.push(e.DocType)}f.DocumentList.checkForNoData()},setPendingAndRejectedSettings:function(t){var r=this;t==="Mixed"&&(r.SeparatePendingAndRejected=n);t==="Separate"&&(r.SeparatePendingAndRejected=i);t==="Hide"&&(r.ShowPendingAndRejected=n,r.SeparatePendingAndRejected=n)}};$$WP.Documents.ViewDocument.Models.DocumentWidgetModel=r;r.extend($$WP.Common.Model,"WP$Documents$ViewDocument$Models$DocumentWidgetModel")}()