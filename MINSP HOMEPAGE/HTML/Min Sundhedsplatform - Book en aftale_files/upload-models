(function(){var d="Home/Error/",g="matchColumnHeights",nt=".esigned",c="title",e="width",tt=".documentpopup object",it=".documentpopup .loadingHeart",u="popupResize",rt="resize.pdfViewer",l="height",ut=".Popup.documentpopup",a="MPEG",v="3GPP",y="WEBMA",p="WEBMV",w="WEBM",f="audio",o="video",b="TIFF",s="PDF",ft="&fncExtID=",k="&dcsId=",r=!0,t=!1,i=null,n,h;PDF_ICON_URL=makeStaticLink("images/document_pdf.svg");TIFF_ICON_URL=makeStaticLink("images/document_tiff.svg");ESIGN_ICON_URL=makeStaticLink("images/document_esigned.svg");VIDEO_ICON_URL=makeStaticLink("images/document_vid.svg");AUDIO_ICON_URL=makeStaticLink("images/document_audio.svg");NON_PDF_ICON_URL=makeStaticLink("images/document_img.svg");$$WP.Utilities.guaranteeExistence($$WP,"Documents.ViewDocument.Models");n=$$WP.Strings.getNamespace("viewdocument");h=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){var w=this;n||(n={},n.DocID=i,n.DcsID=r,n.DocType=u,n.DocExt=f,n.DocDesc=e,n.Date=o,n.DAT=s,n.PendingApprovalStatus=h,n.RejectionReasonFreetext=c,n.WasESigned=l,n.DownloadOnly=a,n.FncExtID=v);w.LetterID=y;w.IsHNOOnly=Boolean(p);w.Template=$$WP.Templates.Documents.ViewDocument.Document;w.WP$Common$Model(n);w.setStatusInfo(n.PendingApprovalStatus,n.RejectionReasonFreetext);w.makeUrl();w.setupDocType();w.setStrings(t)};h.prototype={s_dataMembers:["DocID","DcsID","DocType","DocExt","Date","DocDesc","WasESigned","DAT","DownloadOnly","FncExtID","New","DateRaw","IsExpired"],DocID:i,DcsID:i,DocType:i,DocExt:i,Date:i,DAT:i,DocDesc:i,WasESigned:i,DownloadOnly:t,FncExtID:i,New:t,DateRaw:i,IsExpired:t,Url:i,DownloadUrl:i,IconUrl:i,Template:i,ToolTipString:i,TimeStampString:i,PendingApproval:t,Rejected:t,RejectionReason:"",BadgeHoverText:"",BadgeText:"",LetterID:i,IsHNOOnly:t,MediaType:"",MimeType:"",AllowPreview:r,AllowPrint:r,AllowDownload:r,makeUrl:function(){var n=this,t="Documents/ViewDocument/Download/?docId="+n.DocID+k+n.DcsID;n.FncExtID&&(t=t+ft+n.FncExtID);n.DownloadUrl=makeLink(t)},setupDocType:function(){var u="documentAudioIconAltText",e="documentVideoIconAltText",c="documentImageIconAltText",h="&method=view",i=this;i.AllowPreview=r;i.AllowDownload=r;i.AllowPrint=r;switch(i.DocExt){case s:i.IconUrl=PDF_ICON_URL;i.IconAltText=n.getStringForTemplate("documentPDFIconAltText");i.Template=$$WP.Templates.Documents.ViewDocument.PDFDocument;i.Url=i.DownloadUrl+h;i.AllowDownload=t;(WP.DOM.Browser.isEdge||WP.DOM.Browser.isSafari)&&(i.AllowDownload=r);break;case"PCX":i.DownloadOnly=r;i.IconUrl=NON_PDF_ICON_URL;i.IconAltText=n.getStringForTemplate(c);break;case b:case"TIF":i.IconUrl=TIFF_ICON_URL;i.IconAltText=n.getStringForTemplate("documentTiffIconAltText");i.Template=$$WP.Templates.Documents.ViewDocument.TiffDocument;i.Url=makeLink("Documents/ViewDocument/GetTiff?docId="+i.DocID+k+i.DcsID+(i.FncExtID?ft+i.FncExtID:""));break;case"MP4":case"M4V":i.IconUrl=VIDEO_ICON_URL;i.IconAltText=n.getStringForTemplate(e);i.Template=$$WP.Templates.Documents.ViewDocument.VideoDocument;i.MediaType=o;i.MimeType="video/mp4";break;case"M4A":i.IconUrl=AUDIO_ICON_URL;i.IconAltText=n.getStringForTemplate(u);i.Template=$$WP.Templates.Documents.ViewDocument.VideoDocument;i.MediaType=f;i.MimeType="audio/mp4";break;case"MP3":i.IconUrl=AUDIO_ICON_URL;i.IconAltText=n.getStringForTemplate(u);i.Template=$$WP.Templates.Documents.ViewDocument.VideoDocument;i.MediaType=f;i.MimeType="audio/mp3";break;case w:case p:i.IconUrl=VIDEO_ICON_URL;i.IconAltText=n.getStringForTemplate(e);i.Template=$$WP.Templates.Documents.ViewDocument.VideoDocument;i.MediaType=o;i.MimeType="video/webm";break;case y:i.IconUrl=AUDIO_ICON_URL;i.IconAltText=n.getStringForTemplate(u);i.Template=$$WP.Templates.Documents.ViewDocument.VideoDocument;i.MediaType=f;i.MimeType="audio/webm";break;case"OGG":case"OGV":i.IconUrl=VIDEO_ICON_URL;i.IconAltText=n.getStringForTemplate(e);i.Template=$$WP.Templates.Documents.ViewDocument.VideoDocument;i.MediaType=o;i.MimeType="video/ogg";break;case"OGA":i.IconUrl=AUDIO_ICON_URL;i.IconAltText=n.getStringForTemplate(u);i.Template=$$WP.Templates.Documents.ViewDocument.VideoDocument;i.MediaType=f;i.MimeType="audio/ogg";break;case"FLV":case"MOV":case"3GP":case v:case"MPG":case a:case"WMV":case"AVI":i.IconUrl=VIDEO_ICON_URL;i.IconAltText=n.getStringForTemplate(e);i.Template=$$WP.Templates.Documents.ViewDocument.VideoDocument;i.MediaType=o;break;case"WAV":i.IconUrl=AUDIO_ICON_URL;i.IconAltText=n.getStringForTemplate(u);i.Template=$$WP.Templates.Documents.ViewDocument.VideoDocument;i.MediaType=f;break;case"HTML":i.IconUrl=ESIGN_ICON_URL;i.IconAltText=n.getStringForTemplate("documentESignIconAltText");i.IsHTML=r;i.Template=i.IsHNOOnly?$$WP.Templates.Documents.ViewDocument.LetterNote:$$WP.Templates.Documents.ViewDocument.ESignedDocument;i.Url=i.DownloadUrl+h;break;default:i.IconUrl=NON_PDF_ICON_URL;i.Url=i.DownloadUrl+h;i.IconAltText=n.getStringForTemplate(c)}["DOC","DOCX","MP4","M4V","M4A","MP3",w,p,y,"OGG","OGV","OGA","FLV","MOV","3GP",v,"MPG",a,"WMV","AVI","WAV"].indexOf(i.DocExt)!==-1&&(i.AllowPreview=t,i.AllowPrint=t);$$WP.Utilities.UI.IsMobile&&(i.AllowPrint=t,i.AllowDownload=t,[s].indexOf(i.DocExt)!==-1&&(i.AllowPreview=t))},setStrings:function(t){var e="@MYCHART@DOCTYPE@",o="noFilePreview",f="@MYCHART@FILEEXTENSION@",h="cannotDisplayMobile",u="@MYCHART@DOWNLOADLINK@",c="@MYCHART@DATEADDED@",l="@MYCHART@DATEUPLOADED@",k="@MYCHART@DATESIGNED@",i=this;i.WasESigned==="1"||i.WasESigned===r?($$WP.Strings.addMnemonic(k,i.Date),i.TimeStampString=n.getStringForTemplate("signed"),$$WP.Strings.removeMnemonic(k)):i.Rejected||i.PendingApproval?($$WP.Strings.addMnemonic(l,i.Date),i.TimeStampString=n.getStringForTemplate("uploaded","documents.viewdocument"),$$WP.Strings.removeMnemonic(l),i.PendingApproval&&(i.BadgeHoverText=n.getString("pendingDocumentBadgeHoverText"),i.BadgeText=n.getString("pendingDocumentBadgeText"),t.PendingBadgeText&&(i.BadgeText=t.PendingBadgeText)),i.Rejected&&(i.BadgeHoverText=n.getString("rejectedDocumentBadgeHoverText"),i.BadgeText=n.getString("rejectedDocumentBadgeText"),t.RejectedBadgeText&&(i.BadgeText=t.RejectedBadgeText))):($$WP.Strings.addMnemonic(c,i.Date),i.TimeStampString=n.getStringForTemplate("added"),$$WP.Strings.removeMnemonic(c),t.AcceptedBadgeText&&(i.BadgeText=t.AcceptedBadgeText));i.IsExpired&&(i.BadgeHoverText=n.getString("expiredDocumentBadgeHoverText"),i.BadgeText=n.getString("expiredDocumentBadgeText"),t.ExpiredBadgeText&&(i.BadgeText=t.ExpiredBadgeText));i.DocExt===s?(n.addMnemonic(u,i.DownloadUrl,$$WP.Strings.EncodingTypes.None),i.FallbackText=$afe.select("html").hasClass("mobile")?n.getStringForTemplate(h):n.getStringForTemplate("noEmbeddedPdf"),n.removeMnemonic(u)):i.DocExt===b||i.DocExt==="TIF"?(n.addMnemonic(u,i.DownloadUrl,$$WP.Strings.EncodingTypes.None),$$WP.Utilities.UI.IsMobile?i.FallbackText=n.getStringForTemplate(h):($$WP.Strings.addMnemonic(u,i.DownloadUrl,$$WP.Strings.EncodingTypes.None),i.FallbackText=n.getStringForTemplate("noAcordex"),$$WP.Strings.removeMnemonic(u)),n.removeMnemonic(u)):["DOC","DOCX","MP4","M4V","M4A","MP3",w,p,y,"OGG","OGV","OGA","FLV","MOV","3GP",v,"MPG",a,"WMV","AVI","WAV"].indexOf(i.DocExt)!==-1?$$WP.Utilities.UI.IsMobile?i.FallbackText=n.getStringForTemplate("useComputerToDownload"):(n.addMnemonic(f,i.DocExt),i.FallbackText=n.getString(o),n.removeMnemonic(f)):(n.addMnemonic(f,i.DocExt),i.FallbackText=n.getString(o),n.removeMnemonic(f));n.addMnemonic(e,i.DocType,$$WP.Strings.EncodingTypes.None);i.ToolTipString=n.getString("documenttooltip");n.removeMnemonic(e)},openAsPopup:function(n){var i=this,p,w,a,v,k,e,h,d,c,y,g;if(p=new $$WP.Documents.ViewDocument.Components.DocumentComponent(i),w={HasOverlay:r,Size:i.AllowPreview?$$WPContain.Popup.SizeEnum.LARGE:$$WPContain.Popup.SizeEnum.SMALL,Class:"documentpopup "+n,positioningFunction:$$WPContain.Positions.InsideNearTop,HasBackButton:t},a=$$WPUtil.quickPopup(p,w),a.addEventListener("click",$.proxy(i._onClick,i,a)),$$WP.Utilities.UI.IsMobile&&(i.DocExt===b||i.DocExt==="TIF")&&(v=$afe.select(ut),k=i._computeRemainingHeightOfPopup(v),v.find("iframe.tiffviewer").css(l,k+"px")),i.DocExt===s){i._pfdResize();$afe.jq(window).on(rt,i._pfdResize)}if(i.WasESigned==="1"||i.WasESigned===r)return t;e=$afe.jq($afe.select(".documentpopup img#section-to-print"));h=0;$afe.jq(e).on("load",function(){$afe.jq(window).trigger(u);$afe.jq(window).trigger("resize");h++;h==e.length&&$afe.select(it).remove()});$afe.jq(e).on("error",$.proxy(i._onImageFailure,i));e.length>0&&(d=i,setTimeout(function(){e.length!==h&&d._onImageFailure(2)},3e4));c=$.proxy(i._resize,i);y=$afe.select(".documentpopup video");(i.MediaType==f||i.MediaType==o)&&initAllPlayers();$afe.jq(y).on("loadeddata",c);$afe.jq(y).on("error",c);g=$afe.select(tt);$afe.jq(g).on("load",c);return t},_onClick:function(n,i){return i.dataId===$$WPComp.TOOLBARIDENTIFIER+"downloadfile"?(this._initiateDownload(),i.stopPropagation(),i.preventDefault(),n.dispose(),t):i.dataId==="downloadIcon"?(this._initiateDownload(),t):i.dataId==="printIcon"?(this.PrintClicked(i),t):r},_initiateDownload:function(){var t="uploadWidget-downloadFrame",n;this.DownloadUrl.length>0&&(n=$afe.select("iframe#uploadWidget-downloadFrame"),n&&n.length!==0||(n=$afe.jq(document.createElement("iframe")),n.safeAttr("name",t),n.safeAttr("id",t),n.prop(e,"0"),n.prop(l,"0"),$afe.jq(document.body).safeAppend(n)),n.prop("src",this.DownloadUrl))},_sendDownloadUrl:function(){$$WP.Utilities.TryRedirect(makeLink("Documents/ViewDocument?dcsid="+this.DcsID))},_onImageFailure:function(t){var i=this.FallbackText,r=$afe.select(".viewdocument-popup--error");t===2&&(i=n.getString("errorLoadTime"));$afe.select(it).remove();$afe.select(".documentpopup #section-to-print").remove();$afe.select(".documentpopup .options").remove();dangerou$.setHtml(r,i);r.removeClass("hidden");$afe.jq(window).trigger(u)},_resize:function(){$afe.jq(window).trigger(u);$afe.select(".loadingHeart").remove()},_pfdResize:function(){var n=$afe.select(ut).get(0);if(typeof n!="undefined"&&n!==i){var r=n.getBoundingClientRect(),u=$(window).height(),t=u-r.top-175;t<1&&(t=1e3);$afe.select(tt).height(t)}else $afe.jq(window).off(rt,"",this._pfdResize)},_computeRemainingHeightOfPopup:function(n){var t=parseInt(n.find(".content").first().css("max-height"),10),i;return isNaN(t)?(i=n.get(0).getBoundingClientRect(),$(window).height()-i.bottom-10):t-n.height()-10},PrintClicked:function(){var a="min-height",u="inherit",v="padding",o="printFrame",y,f,n,r,s,p,h,w;for(f=document.getElementById(o),f||(f=document.createElement("iframe"),n=$afe.jq(f),n.safeAttr("name",o),n.safeAttr("id",o),n.prop(e,"0"),n.prop(l,"0"),n.prop("src","about:blank"),$afe.jq(document.body).safeAppend(n),n.contents().find("head").safeAppend($afe.jq(document.createElement(c))),n.load(function(){var n=document.getElementById(o);n.contentWindow.focus();WP.DOM.Browser.isIE?n.contentWindow.document.execCommand("print",t,i):n.contentWindow.print()})),n=$afe.jq(f),s=n.contents().find("head"),s.find(c).text($afe.select(".titlebar span")[0].innerHTML),r=n.contents().find("body"),y=$afe.select(nt),y.length>0?dangerou$.setHtml(r,y[0].innerHTML):dangerou$.setHtml(r,$afe.select("#section-to-print")[0].outerHTML.replace("method=view","method=print")),r.find("._headerContent").css(v,u).css(e,u).css(a,u),r.find("._mainContent").css(v,u).css(e,u).css(a,u),r.find("._footerContent").css(v,u).css(e,u).css(a,u),r.find("canvas").css("background-color","#eee").css("border","1px #ccc solid"),images=r.find("img"),h=0;h<images.length;h++)w=$afe.jq(images[h]),w.css("max-width","7in");return p=navigator.userAgent.toLowerCase().indexOf("safari/")>-1&&navigator.userAgent.toLowerCase().indexOf("chrome/")===-1,p?setTimeout(function(){f.contentWindow.document.write(s[0].outerHTML+r[0].outerHTML);f.contentWindow.document.close()},200):(f.contentWindow.document.write(s[0].outerHTML+r[0].outerHTML),f.contentWindow.document.close()),t},openAsNewPage:function(){var n=makeLink("Documents/ViewDocuments/ViewDocument?dcsId="+this.DcsID+"&docId="+this.DocID);window.location=n},setStatusInfo:function(n,i){var u=this;n===1?(u.PendingApproval=r,u.Rejected=t,u.New=t):n===2?(u.PendingApproval=t,u.Rejected=r,u.RejectionReason=i,u.New=t):(u.PendingApproval=t,u.Rejected=t)},displayESign:function(){var t=this,r=t.DcsID,f=t.DAT,i="";t.FncExtID&&(i=t.FncExtID);getCSRFTokenAsQS(function(t){$.ajax({type:"POST",url:makeLink("Documents/ESignatures/LoadESignDocContent"),data:t+k+r+"&eptDAT="+f+"&fncExtId="+i,dataType:"json",success:function(t){var i=$afe.select(nt);dangerou$.setHtml(i,t);$afe.select("img").each(function(n,t){t.onload=function(){$afe.jq(window).trigger(u)};t.onerror=function(){$afe.jq(window).trigger(u)}});$afe.select("canvas").attr(c,n.getStringForTemplate("unsignedField"));$afe.jq(window).trigger(g)},error:function(){link=makeLink(d);window.location=link}})})},displayHNO:function(){$.ajax({type:"POST",url:this.Url,dataType:"json",success:function(n){var t=$afe.select(".letterNote");dangerou$.setHtml(t,n);$afe.select("img").each(function(n,t){t.onload=function(){$afe.jq(window).trigger(u)};t.onerror=function(){$afe.jq(window).trigger(u)}});$afe.jq(window).trigger("resize");$afe.jq(window).trigger(g)},error:function(){link=makeLink(d);window.location=link}})}};$$WP.Documents.ViewDocument.Models.DocumentModel=h;h.extend($$WP.Common.Model,"WP$Documents$ViewDocument$Models$DocumentModel")})(),function(){var n=null,t;$$WP.Utilities.guaranteeExistence($$WP,"Upload.Models");t=function(n){var t=this;n=n||{};t.WP$Common$Model(n);t.ContextData=jQuery.extend(!0,{},t.ContextData);t.ViewTemplate=n.ViewTemplate||$$WP.Templates.Upload.UploadContainer;t.UploadCardTemplate=n.UploadCardTemplate||$$WP.Templates.Upload.UploadCard;t.DefaultStringNamespace=n.DefaultStringNamespace||"Upload"};t.prototype={s_dataMembers:["AllowedImageAndDocumentExtensions","AllowedVideoExtensions","MaxAllowedImageSize","MaxAllowedVideoSize","MaxFilesAllowed","ContextData"],AllowedImageAndDocumentExtensions:n,AllowedVideoExtensions:n,MaxAllowedImageSize:n,MaxAllowedVideoSize:n,MaxFilesAllowed:n,ContextData:{},ViewTemplate:n,UploadCardTemplate:n,AttachContainerEventHandlers:n,AttachFileCardEventHandlers:n,DefaultStringNamespace:n,ConfigUrl:n,UploadUrl:makeLink("DocumentUpload/UploadFile"),DeleteUrl:makeLink("DocumentUpload/DeleteFile"),EditUrl:makeLink("DocumentUpload/EditFileName"),onConfigStart:n,onUploadStart:n,onEditStart:n,onDeleteStart:n,onConfigSucess:n,onUploadSuccess:n,onDeleteSuccess:n,onEditSuccess:n,onConfigFail:n,onUploadFail:n,onDeleteFail:n,onEditFail:n,IsFileAceptable:function(n,t){var i=this,u=(n||"").lastIndexOf("."),r="",f=i.AllowedExtensions;return u>-1&&(r=n.substr(u+1).toUpperCase(),f.indexOf(r)>-1)?(t=t/1024,i.AllowedImageAndDocumentExtensions&&i.AllowedImageAndDocumentExtensions.indexOf(r)>-1&&i.MaxAllowedImageSize<t?2:i.AllowedVideoExtensions&&i.AllowedVideoExtensions.indexOf(r)>-1&&i.MaxAllowedVideoSize<t?3:0):1},get AllowedExtensions(){var n=this,t=[];return n.AllowedImageAndDocumentExtensions&&n.AllowedImageAndDocumentExtensions.length>0&&n.MaxAllowedImageSize>0&&(t=t.concat(n.AllowedImageAndDocumentExtensions)),n.AllowedVideoExtensions&&n.AllowedVideoExtensions.length>0&&n.MaxAllowedVideoSize>0&&(t=t.concat(n.AllowedVideoExtensions)),t},get AllowedExtensionsForInput(){var n=this.AllowedExtensions;return n&&n.length>0?"."+n.join(",."):""},get AllowedDocumentsHelperText(){var i="@MYCHART@ALLOWEDVIDEOSIZE@",r="@MYCHART@ALLOWEDIMAGESIZE@",u="@MYCHART@ALLOWEDEXTENSIONS@",f="@MYCHART@MAXUPLOADS@",n=this,t="";return $$WP.Strings.setDefaultNamespace(n.DefaultStringNamespace),$$WP.Strings.addMnemonic(f,n.MaxFilesAllowed),$$WP.Strings.addMnemonic(u,n.AllowedExtensions.join($$WP.Strings.get("listSeparator"))),$$WP.Strings.addMnemonic(r,Math.floor(n.MaxAllowedImageSize*10/1024)/10),$$WP.Strings.addMnemonic(i,Math.floor(n.MaxAllowedVideoSize*10/1024)/10),t=n.MaxFilesAllowed===1?$$WP.Strings.get("UploadInfoBubbleHelpTextOneFile"):$$WP.Strings.get("UploadInfoBubbleHelpText"),n.MaxAllowedImageSize>0&&(t+=$$WP.Strings.get("UploadInfoBubbleImageSizeHelpText")),n.MaxAllowedVideoSize>0&&(t+=$$WP.Strings.get("UploadInfoBubbleVideoSizeHelpText")),$$WP.Strings.removeMnemonic(i),$$WP.Strings.removeMnemonic(r),$$WP.Strings.removeMnemonic(u),$$WP.Strings.removeMnemonic(f),$$WP.Strings.clearDefaultNamespace(),t}};t.parse=function(n){return new t(n)};$$WP.Upload.Models.UploadConfiguration=t;t.extend($$WP.Common.Model,"WP$Upload$Models$UploadConfiguration")}(),function(){var t=null,n;$$WP.Utilities.guaranteeExistence($$WP,"Upload.Models");n=function(n){n=n||{};this.WP$Common$Model(n)};n.prototype={s_dataMembers:["DocumentId","FileDisplayName","FileExtension","DownloadUrl","FileReference","AllowPreview"],DocumentId:t,FileDisplayName:t,FileExtension:t,FileReference:t,DownloadUrl:t,AllowPreview:t,get FileImageIconClass(){var n="file-type-icon--unknown";return this.FileExtension&&(n=this.FileExtension.substr(this.FileExtension.lastIndexOf(".")+1),n=n.toLowerCase(),n="file-type-icon--"+n),n},get FileExtensionWithoutDot(){var n="";return this.FileExtension&&(n=this.FileExtension.substr(this.FileExtension.lastIndexOf(".")+1),n=n.toUpperCase()),n},IsImageFileType:function(){var n=!1;switch(this.FileExtensionWithoutDot){case"JPG":case"PNG":case"BMP":case"GIF":case"JPEG":case"TGA":case"FMF":case"PCX":case"DCX":case"WPG":n=!0}return n}};n.parse=function(t){return new n(t)};n.parseList=function(t){var r=[],i;if($.isArray(t))for(i=0;i<t.length;++i)r.push(new n(t[i]));return r};$$WP.Upload.Models.Document=n;n.extend($$WP.Common.Model,"WP$Upload$Models$Document")}()