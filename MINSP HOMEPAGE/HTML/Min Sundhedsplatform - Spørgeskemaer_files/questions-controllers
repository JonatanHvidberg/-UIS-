function touchHandler(n){var r=!1,f,u,t,i;f=n.originalEvent.changedTouches;t=f[0];i="";switch(n.type){case"touchstart":i="mousedown";break;case"touchmove":i="mousemove";break;case"touchend":i="mouseup";break;default:return}u=document.createEvent("MouseEvent");u.initMouseEvent(i,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,r,r,r,r,0,null);t.target.dispatchEvent(u);n.preventDefault()}function initTouch(n){n.on("touchstart touchmove touchend touchcancel",touchHandler)}(function(){var f="matchColumnHeights",e=":checked",o="collapse",r="collapsible",s="data-collapsible-target",t=!1,n=!0,i=null,u=function(n,t){var i=this;i.WP$Controllers$Controller();i.$accordion=n;i.accordionButtons=t;i.initialize()},h={$accordion:i,accordionButtons:[],$accordionBody:i,isCollapsable:n,preventCollapseIfInvalid:n,isDestroyed:t,initialize:function(){var n=this,i,u,f,t;if(!n.isDestroyed){for(t=0;t<n.accordionButtons.length;t++)i=$afe.jq(n.accordionButtons[t]),u=i.safeAttr(s),u&&(f=$afe.jq(n.$accordion.find(u)),n.__initAccordionBody(f),n.$accordionBody=f),n.__initAccordionButton(i);n.__initAccordionHeader();n.isCollapsable=n.$accordion.hasClass(r);n.updateStyling()}},onAfterValidation:function(){$$WP.Utilities.UI.IsMobile||$$WP.ApplicationContext===applicationWelcome||($$WP.Questions.Utilities.Collapsible.collapse(this.$accordionBody,o,0),this.$accordion.removeClass("preload"))},updateStyling:function(){var i="firstRow",n=this,r,u,f,t;n.isDestroyed||(n.$accordion.removeClass(i),n.$accordion.removeClass("lastRow"),r=window.matchMedia("only screen and (max-width: 1280px)").matches,t=r?n.$accordion.closest(".grid"):n.$accordion.closest("[class^='col']"),u=n.$accordion.is(t.find(".accordion:visible:first")),f=n.$accordion.is(t.find(".accordion:visible:last")),u&&n.$accordion.addClass(i),f&&n.$accordion.addClass("lastRow"))},destroy:function(){var t=this;t.$accordion=i;t.$accordionBody=i;t.accordionButtons=[];t.isDestroyed=n},__initAccordionButton:function(i){if(i.click($.proxy(function(t){this.__handleAccordionToggle(i,t,n)},this)),!(WP.DOM.Browser.isIE||WP.DOM.Browser.isFirefox||WP.DOM.Browser.isEdge))i.on("keyup",$.proxy(function(r){r.which===32&&$afe.jq(i).is(e)&&(this.__handleAccordionToggle(i,r,t),r.isDefaultPrevented()||$$WP.Utilities.UI.ToggleButtonClick(i,r,0,n),r.preventDefault())},this))},__handleAccordionToggle:function(i,r,u){var f=this,l,h,c;h=i.is(e);l=i.safeAttr(s);c=t;u||(h=!h);h&&l?$$WP.Questions.Utilities.Collapsible.collapse(f.$accordionBody,"show")&&(c=n,f.isCollapsable=n):(f.preventCollapseIfInvalid=t,$$WP.Questions.Utilities.Collapsible.collapse(f.$accordionBody,o)&&(c=n,f.isCollapsable=t),f.preventCollapseIfInvalid=n);$$WP.Utilities.UI.IsMobile||$$WP.ApplicationContext===applicationWelcome||setTimeout($.proxy(function(){this.__enableAccordionHeaderToggle(this.isCollapsable)},f),100);c||(r.preventDefault(),setTimeout(function(){i.trigger("change",n)},100));r.stopPropagation()},__initAccordionBody:function(n){var t=this;n.on("collapsibleShow",$.proxy(function(n){this.__accordionShowEventHandler(n)},t));n.on("collapsibleShown",$.proxy(function(n){this.__accordionShownEventHandler(n)},t));n.on("collapsibleCollapse",$.proxy(function(n){this.__accordionCollapseEventHandler(n)},t));n.on("collapsibleCollapsed",$.proxy(function(n){this.__accordionCollapsedEventHandler(n)},t))},__initAccordionHeader:function(){var i,n;i=this.$accordion.find(".accordion-heading");n=i.find(".chevronButton");$$WP.Questions.Utilities.Collapsible(n);n.on("keydown",$.proxy(this._fakeButtonKeyHandler,this));i.find(".backgroundClickable, .header").click(function(){return n.trigger("click"),t})},_fakeButtonKeyHandler:function(n){if(n.which===13||n.which===32)return $afe.jq(n.delegateTarget).trigger("click"),t},__accordionShowEventHandler:function(){this.isDestroyed||this.__setTransitioningStyle(n)},__accordionCollapseEventHandler:function(t){var i=this;if(!i.isDestroyed){if(i.preventCollapseIfInvalid&&i.$accordion.is("[data-invalid]")){t.preventDefault();return}i.__setTransitioningStyle(n)}},__accordionShownEventHandler:function(){var i=this;i.isDestroyed||(i.__setShowingStyle(n),i.__setTransitioningStyle(t),$$WP.FormValidation.initializeDOMSubtree(i.$accordion),i.$accordion.find(".matchHeights").each($$WP.Utilities.UI.Cards.MatchHeights),$afe.jq(window).trigger(f))},__accordionCollapsedEventHandler:function(){var n=this;n.isDestroyed||(n.__setShowingStyle(t),n.__setTransitioningStyle(t),$$WP.FormValidation.initializeDOMSubtree(n.$accordion),$afe.jq(window).trigger(f))},__enableAccordionHeaderToggle:function(n){var u="data-collapsible-button",t=this,i;t.isDestroyed||(i=t.$accordion.find(".accordion-heading .chevronButton"),n?(t.$accordion.addClass(r),i.safeAttr(u,"toggle")):(t.$accordion.removeClass(r),i.safeAttr(u,"")))},__setTransitioningStyle:function(n){var t="accordion-transitioning";n?this.$accordion.addClass(t):this.$accordion.removeClass(t)},__setShowingStyle:function(n){var t="accordion-show";n?this.$accordion.addClass(t):this.$accordion.removeClass(t)}};u.prototype=h;$$WP.Questions=$$WP.Questions||{};$$WP.Questions.AccordionController=u;u.extend($$WP.Controllers.Controller,"WP$Questions$AccordionController")})();Math.log10=Math.log10||function(n){return Math.log(n)*Math.LOG10E},function(){var st=".option.active .togglebuttonimg",u="active",a="sliderup",ht="SliderBlank",s="aria-valuetext",f="aria-label",rt="height",ut=".togglebuttontext",v="alt",ct=".option.active",h=250,e="px",c="invisible",y=".currentlyselected",p="click",w=".max > span",b=".min > span",k="input",d="keydown",g=".sliderresponseoptions",lt="pointer-events",at="aria-hidden",vt="tabindex",yt="sliderValidation",pt="resetSliderOffset",nt="resize",tt=".min",l=".max",o=".option",ft="click keydown",et="mousedown keydown",it="mousedown",wt="mousemove",t=!0,r="",i=!1,n=null,ot=function(n,t,i,r){var u=this;u.WP$Controllers$Controller();u.__setBasicProperties(n,t);u.__setSliderOptions(i,r);r&&u.__customListSpecificSetup();u.initialize()},bt={questionId:n,$question:n,$noResponse:n,$noResponseClickableArea:n,$noResponseLabel:n,$slider:n,$sliderClickableArea:n,valueOnDrop:n,min:0,minLocal:n,minLabel:n,minLabelDifferent:n,max:100,maxLocal:n,maxLabel:n,maxLabelDifferent:n,precision:n,arrowPrecision:n,step:1,arrowStep:n,defaultVal:n,displayVertically:i,cssPropertyToUpdate:n,showNumber:n,showNumberBecauseOfRequiredness:n,isCustomList:i,showAllOptions:i,sliderWidth:n,leftOffset:n,sliderHeight:n,topOffset:n,minSliderBallCenterPos:n,maxSliderBallCenterPos:n,noResponseSliderStartPos:n,noResponseWidth:n,noResponseWidthPlusMargin:n,noResponseHeight:n,$sliderBall:n,sliderBallWidth:n,$minmax:n,$sliderInput:n,$options:n,setSliderBall:i,isSliding:i,sliderBallTimer:n,animationTimer:n,ariaLabelTimer:n,isDestroyed:i,isRTL:i,heightOnSelection:n,animating:i,initialize:function(){var n=this,i;n.isDestroyed||(n.setSliderSizeAndOffset(r,t),n.__initQuestionEvents(),n.__initNoResponseEvents(),n.__initSliderEvents(),n.__initSliderBallEvents(),n.__initMinMaxEvents(),n.isCustomList?n.__initOptionEvents():n.__initInputEvents(),i=n.$sliderBall.add(n.$slider).add(n.$noResponse).add(n.$noResponseLabel),initTouch(i))},destroy:function(){var i=this;i.$question.off(wt);i.$question=n;i.$sliderClickableArea.off(it);i.$sliderClickableArea=n;i.$slider=n;i.$sliderBall.off("focus mousedown keydown");i.$sliderBall=n;i.$sliderInput.off("input updateslider focus");i.$sliderInput=n;i.$noResponseClickableArea.off(it);i.$noResponseClickableArea=n;i.$noResponse=n;i.$noResponseLabel.off(et);i.$noResponseLabel=n;i.$minmax.find(".min > span, .mintext, .max > span, .maxtext").off(ft);i.$minmax=n;i.isDestroyed=t},setSliderSizeAndOffset:function(n){var r=this,f,e,w,v,p,s,h,c,a,u,y;if(!r.isDestroyed&&(f=r.$slider.offset(),e=r.$noResponse.offset(),f)){if(r.sliderBallWidth=$$WPQuestionUtil.getElementWidth(r.$sliderBall),r.isCustomList?(y=r.$minmax.find(o),r.showAllOptions?(v=y.first(),p=y.last(),r.displayVertically?(u=v,h=Math.round(u.offset().top),a=$$WPQuestionUtil.getElementHeight(u),r.minSliderBallCenterPos=h-f.top+a/2):(u=r.isRTL?p:v,s=Math.round(u.offset().left),c=$$WPQuestionUtil.getElementWidth(u),r.minSliderBallCenterPos=s-f.left+c/2)):r.displayVertically?(u=r.$minmax.find(l),h=Math.round(u.offset().top),a=$$WPQuestionUtil.getElementHeight(u),r.minSliderBallCenterPos=h-f.top+a/2):(u=r.$minmax.find(tt),r.isRTL&&(u=r.$minmax.find(l)),s=Math.round(u.offset().left),c=$$WPQuestionUtil.getElementWidth(u)/2,r.minSliderBallCenterPos=s-f.left+c/2)):r.minSliderBallCenterPos=r.sliderBallWidth/2,r.displayVertically)r.__setHeight(f,e);else if($$WP.ApplicationContext!==applicationWelcome||r.setSliderBall)r.__setWidth(i,f,e);else{w=setTimeout($.proxy(function(){this.__setWidth(t,f,e,n)},r),10);return}r.__setSliderBallLocationOnLoadOrResize(n===nt);n!==nt&&n!==pt||r.displayVertically||r.__setHeightOnSelection()}},markAsRequired:function(){var n=this;n.isCustomList||(n.showNumber||(n.showNumberBecauseOfRequiredness=t,n.showNumber=t),n.$sliderInput.removeClass(yt),$$WP.Utilities.UI.IsMobile||$$WP.ApplicationContext===applicationWelcome||(n.$sliderInput.safeAttr(vt,"0"),n.$sliderInput.removeAttr(at)),$$WP.ApplicationContext===applicationWelcome&&n.$sliderInput.css(lt,"auto"))},markAsUnrequired:function(){var n=this;n.isCustomList||n.showNumberBecauseOfRequiredness&&(n.$sliderInput.addClass(yt),$$WP.Utilities.UI.IsMobile||$$WP.ApplicationContext===applicationWelcome||(n.$sliderInput.safeAttr(vt,"-1"),n.$sliderInput.safeAttr(at,"true")),$$WP.ApplicationContext!==applicationWelcome||$$WP.IsAccessibilityOn||n.$sliderInput.css(lt,"none"),n.showNumber=i)},mouseUpEventHandler:function(){var n=this,t;n.isSliding&&(t=n.__calculateSliderBallPosition(n.valueOnDrop),n.__changeCss(t));n.isSliding=i;n.__dropSlider()},__setBasicProperties:function(n,t){var i=this;i.questionId=n;i.$question=t.$question;i.$noResponse=t.$noResponse;i.$noResponseClickableArea=i.$question.find(".noresponseclickablearea");i.$noResponseLabel=t.$noResponseLabel;i.$slider=t.$slider;i.$sliderClickableArea=i.$question.find(".sliderclickablearea");i.$sliderBall=t.$sliderBall;i.$minmax=t.$minmax;i.$sliderInput=t.$sliderInput;i.$options=i.$minmax.find(o)},__setSliderOptions:function(n,t){var i=this;for(i.min=n.Min,i.minLocal=n.MinLocal,i.minLabel=n.MinLabel,i.minLabelDifferent=i.min.toString()!==i.minLabel,t||(i.minLabelDifferent=i.minLocal.toString()!==i.minLabel),i.max=n.Max,i.maxLocal=n.MaxLocal,i.maxLabel=n.MaxLabel,i.maxLabelDifferent=i.max.toString()!==i.maxLabel,t||(i.maxLabelDifferent=i.maxLocal.toString()!==i.maxLabel),i.step=n.Step||1,i.arrowStep=i.step===1?1:.1;i.arrowStep>i.max-i.min;)i.arrowStep=i.arrowStep/10;i.displayVertically=n.DisplayVertically;i.isRTL=n.IsRTL;i.cssPropertyToUpdate=i.displayVertically?"top":"left";i.precision=Math.log10(1/i.step);i.arrowPrecision=Math.log10(1/i.arrowStep);i.defaultVal=i.min-i.arrowStep;i.showNumber=n.ShowNumber;i.showNumberBecauseOfRequiredness=n.ShowNumberBecauseOfRequiredness;i.isCustomList=t;i.showAllOptions=n.ShowAllOptions},__customListSpecificSetup:function(){var n=this;$$WPQuestionUtil.waitForImages(r,n.$minmax.find(g),n.displayVertically?r:$.proxy(n.__setHeightOnSelection,n))},__setHeight:function(n,t){var i=this,r,u;i.sliderHeight=$$WPQuestionUtil.getElementHeight(i.$slider);i.topOffset=Math.round(n.top);i.maxSliderBallCenterPos=i.sliderHeight-i.minSliderBallCenterPos;i.noResponseHeight=$$WPQuestionUtil.getElementHeight(i.$noResponse);r=Math.round(t.top);u=r+i.noResponseHeight/2;i.noResponseSliderStartPos=u-i.sliderBallWidth/2-i.topOffset},__setWidth:function(n,t,i,r){var u=this,f,e;u.isDestroyed||(u.sliderWidth=$$WPQuestionUtil.getElementWidth(u.$slider),u.leftOffset=Math.round(t.left),u.noResponseWidth=$$WPQuestionUtil.getElementWidth(u.$noResponse),f=Math.round(i.left),u.noResponseWidthPlusMargin=u.isRTL?0:u.leftOffset-f,u.minSliderBallCenterPos+=u.noResponseWidthPlusMargin,u.maxSliderBallCenterPos=u.sliderWidth-(u.minSliderBallCenterPos-u.noResponseWidthPlusMargin)+u.noResponseWidthPlusMargin,e=f+u.noResponseWidth/2,u.noResponseSliderStartPos=e-u.sliderBallWidth/2,u.noResponseSliderStartPos-=u.isRTL?u.leftOffset:f,n&&(u.__setSliderBallLocationOnLoadOrResize(r===nt),r!==nt&&r!==pt||u.displayVertically||u.__setHeightOnSelection()))},__initQuestionEvents:function(){if(!this.isDestroyed)this.$question.on(wt,$.proxy(function(n){this.__mouseMoveEventHandler(n)},this))},__initNoResponseEvents:function(){var n=this;n.$noResponseClickableArea.on(it,$.proxy(function(){var n=this;n.isSliding=t;n.__pickUpSlider();n.sliderBallTimer=0;n.__noResponseEventHandler()},n));n.$noResponseLabel.on(et,$.proxy(function(n){(n.type!==d||n.which===13||n.which===32)&&(this.sliderBallTimer=0,this.__noResponseEventHandler())},n))},__initSliderEvents:function(){if(!this.isDestroyed)this.$sliderClickableArea.on(it,$.proxy(function(n){this.sliderBallTimer=0;this.__sliderMousedown(n)},this))},__initSliderBallEvents:function(){var n=this;if(!n.isDestroyed){n.$sliderBall.on("focus",$.proxy(function(){this.__changeAriaLabel(t)},n));n.$sliderBall.on(et,$.proxy(function(n){this.__sliderBallEventEntry(n)},n))}},__initInputEvents:function(){var n=this;if(!n.isDestroyed){n.$sliderInput.on(k,$.proxy(function(n,t,i,r,u){this.__sliderInputUpdate(t,i,r,u)},n));n.$sliderInput.on("updateslider",$.proxy(function(){this.__sliderInputUpdate()},n));if($$WP.Utilities.UI.IsMobile||$$WP.ApplicationContext===applicationWelcome)n.$sliderInput.on("focus",$.proxy(function(){this.__changeAriaLabel(t)},n))}},__initMinMaxEvents:function(){var n=this;if(!n.isCustomList){n.$minmax.find(b).on(ft,$.proxy(function(n){(n.type!==d||n.which===13||n.which===32)&&this.__minOrMaxClickEventHandler(this.min)},n));n.$minmax.find(w).on(ft,$.proxy(function(n){(n.type!==d||n.which===13||n.which===32)&&this.__minOrMaxClickEventHandler(this.max)},n))}},__initOptionEvents:function(){if(!this.isDestroyed)this.$minmax.find(".option > *").on(p,$.proxy(function(n){this.__optionClickEventHandler(n)},this))},__mouseMoveEventHandler:function(n){(this.setSliderSizeAndOffset(i),this.isSliding)&&this.__moveSlider(n)},__noResponseEventHandler:function(){var n=this,u;n.valueOnDrop=r;n.isCustomList?(u=n.$minmax.find(".option.active input"),u.prop("wasChecked",u.prop("checked")),u.trigger(p,[0,t]),n.$question.find(y).addClass(c),n.__deactivateCurrentSelection(),n.__changeAriaLabel(i)):n.__changeInput(r,r,t);n.__moveSliderBallToNoResponse()},__sliderMousedown:function(n){var i=this;i.isSliding=t;i.setSliderSizeAndOffset();i.__pickUpSlider();i.__moveSlider(n);i.__activateCurrentSelection()},__sliderBallEventEntry:function(n){var i=this;i.setSliderSizeAndOffset();n.type===d?i.__sliderBallKeydown(n):(i.isSliding=t,i.__pickUpSlider())},__sliderBallKeydown:function(n){var t=this,i;(n.which===37||n.which===38||n.which===39||n.which===40)&&(t.__pickUpSlider(),i=t.isRTL?n.which===38||n.which===37:n.which===38||n.which===39,t.__moveSliderArrows(i),t.__dropSlider(),n.preventDefault())},__sliderInputUpdate:function(n,r,u,f){var e=this;e.isSliding||n||r||e.sliderBallTimer||(u?(e.__inputChanged(t),e.sliderBallTimer=0):f?(e.__inputChanged(t),e.sliderBallTimer=0):e.sliderBallTimer=setTimeout($.proxy(function(){this.sliderBallTimer&&(this.__inputChanged(i),this.sliderBallTimer=0)},e),500))},__minOrMaxClickEventHandler:function(n){var r=this,u=r.__calculateSliderBallPosition(n,t);r.valueOnDrop=n;r.__changeCss(u);r.__changeAriaLabel();r.__changeInput($$WP.I18N.formatNumber(n,r.precision),i,i,i,t);r.__activateCurrentSelection()},__optionClickEventHandler:function(n){this.__clickOption($afe.jq(n.target).parents(o),i,i);n.stopImmediatePropagation()},__moveSlider:function(n){var u=this,l,a,h,c,s,o,f,e;if(!u.isDestroyed){if(u.displayVertically?(o=n.pageY,f=o-u.topOffset):(o=n.pageX,f=o-u.leftOffset+u.noResponseWidthPlusMargin),e=f-u.sliderBallWidth/2,u.isCustomList&&(u.displayVertically?e<0?(e=0,s=t):e+u.sliderBallWidth>u.sliderHeight&&(e=u.sliderHeight-u.sliderBallWidth,s=t):e<u.noResponseWidthPlusMargin?(e=u.noResponseWidthPlusMargin,s=t):e+u.sliderBallWidth>u.noResponseWidthPlusMargin+u.sliderWidth&&(e=u.noResponseWidthPlusMargin+u.sliderWidth-u.sliderBallWidth,s=t)),f<u.minSliderBallCenterPos)if(u.displayVertically)u.isCustomList||(f=u.minSliderBallCenterPos);else if(o>=u.leftOffset)u.isCustomList||(f=u.minSliderBallCenterPos);else{if(u.isRTL)return;if(o>u.$noResponse.offset().left+u.noResponseWidth)return;c=t}else if(f>u.maxSliderBallCenterPos)if(u.displayVertically)o<=u.topOffset+u.sliderHeight?u.isCustomList||(f=u.maxSliderBallCenterPos):c=t;else if(u.isRTL)if(o>u.$noResponse.offset().left)c=t;else{if(o>u.leftOffset+u.sliderWidth)return;u.isCustomList||(f=u.maxSliderBallCenterPos)}else u.isCustomList||(f=u.maxSliderBallCenterPos);c?(u.__moveSliderBallToNoResponse(i),u.__changeInput(r)):(a=u.max-u.min,l=$$WPQuestionUtil.calculateSliderBallPercent(f,u.minSliderBallCenterPos,u.maxSliderBallCenterPos,u.displayVertically,u.isRTL),value=u.min+l*a-0,h=$$WP.I18N.formatNumber(value,u.precision),u.valueOnDrop=(+value).toFixed(u.precision)-0,u.isCustomList&&(u.valueOnDrop<u.min?(u.valueOnDrop=u.min,h=u.valueOnDrop.toString()):u.valueOnDrop>u.max&&(u.valueOnDrop=u.max,h=u.valueOnDrop.toString())),s||(e=u.__calculateSliderBallPosition(value,t)),u.__changeCss(e),u.__changeAriaLabel(),u.__changeInput(h),u.__activateCurrentSelection())}},__moveSliderArrows:function(u){var f=this,e,o,h,s;if(!f.isDestroyed){if(e=f.__getCurrentAnswer(),e===r||e===n?e=f.defaultVal:f.isCustomList&&(e=+e),u)if(e>f.max)o=f.max;else{if(e===f.max)return;o=(e+f.arrowStep).toFixed(f.arrowPrecision)-0;(o-e).toFixed(f.arrowPrecision+1)-0>f.arrowStep&&(o=(o-f.arrowStep).toFixed(f.arrowPrecision+1)-0)}else e<=f.min?s=t:(o=(e-f.arrowStep).toFixed(f.arrowPrecision)-0,(o+f.arrowStep).toFixed(f.arrowPrecision+1)-0<e&&(o=(o+f.arrowStep).toFixed(f.arrowPrecision+1)-0));s?f.__noResponseEventHandler():(h=f.__calculateSliderBallPosition(o),f.__changeAriaLabel(),f.__activateCurrentSelection(),f.isCustomList||(o=$$WP.I18N.formatNumber(o,f.precision)),f.__changeInput(o,i,i,t))}},__setSliderBallLocationOnLoadOrResize:function(n){var r=this;r.isDestroyed||(r.$slider.is(":visible")?r.setSliderBall&&(!n||r.isSliding)||(r.__setSliderBallLocation(n),r.setSliderBall=t):r.setSliderBall=i)},__setSliderBallLocation:function(n){var i=this,r,u,f;i.isDestroyed||(r=i.__getCurrentAnswer(),f=i.__calculateSliderBallPosition(r),i.valueOnDrop=r,i.$sliderBall.hasClass(c)&&(u=t,n=t),n?(i.__changeCss(f),u&&i.$sliderBall.removeClass(c)):i.displayVertically?(i.animating=t,i.$sliderBall.animate({top:i.__calculateSliderBallPosition(r)+e},h,$.proxy(i.__doneAnimating,i))):(i.animating=t,i.$sliderBall.animate({left:i.__calculateSliderBallPosition(r)+e},h,$.proxy(i.__doneAnimating,i))))},__calculateSliderBallPosition:function(t,i){var u=this,e,f;if(!u.isDestroyed)return t||t!==r&&t!==n?!i&&(t<u.min||t>u.max)?f=u.noResponseSliderStartPos:(e=$$WPQuestionUtil.calculateSliderBallPercent(t,u.min,u.max,u.displayVertically,u.isRTL),f=e*(u.maxSliderBallCenterPos-u.minSliderBallCenterPos)+u.minSliderBallCenterPos-u.sliderBallWidth/2):f=u.noResponseSliderStartPos,f},__moveSliderBallToNoResponse:function(n){var i=this;i.valueOnDrop=r;n?i.displayVertically?(i.animating=t,i.$sliderBall.animate({top:i.noResponseSliderStartPos+e},h,$.proxy(i.__doneAnimating,i))):(i.animating=t,i.$sliderBall.animate({left:i.noResponseSliderStartPos+e},h,$.proxy(i.__doneAnimating,i))):i.__changeCss(i.noResponseSliderStartPos);i.isCustomList||i.__deactivateCurrentSelection();i.__changeAriaLabel()},__changeInput:function(n,t,u,f,e){var s=this,h,c;s.isDestroyed||(s.isCustomList?n===r?(h=s.$minmax.find(ct),s.__unclickOption(h)):(c=s.$minmax.find(".option[data-index='"+n+"'] input"),h=c.parents(o),s.__clickOption(h,!f,i)):(s.$sliderInput.val(n),s.$sliderInput.trigger(k,[t,u,f,e])))},__inputChanged:function(i){var u=this,f=$$WP.I18N.parseNumber(u.$sliderInput.val()),e;!f&&(f===n||f===r)?e=t:f<u.min||f>u.max||isNaN(f)?(e=t,u.valueOnDrop=r):u.valueOnDrop=f;u.__changeAriaLabel();e?u.__moveSliderBallToNoResponse(!i):(u.__setSliderBallLocation(i),u.__activateCurrentSelection())},__clickOption:function(n,i,r){var f=".currentlyselected > img",u=this,h=n.data("index"),l,a,e,o,s;u.valueOnDrop=+h;i||(l=u.__calculateSliderBallPosition(h),u.__changeCss(l));r||u.__activateCurrentSelection(n);u.__changeAriaLabel();s=n.find(k);s.prop("checked",t);s.trigger(p,[1,r]);a=u.$question.find(f).safeAttr("src");e=n.find("img").safeAttr("src");o=n.find("img").safeAttr(v)||n.find(ut).text();a!==e&&(u.$question.find(f).safeAttr("src",e),u.$question.find(f).safeAttr(v,o),o||u.$question.find(f).removeAttr(v));e?u.$question.find(y).removeClass(c):u.$question.find(y).addClass(c)},__unclickOption:function(n){this.__deactivateCurrentSelection(n);this.__changeAriaLabel();n.find(k).trigger(p,[0,t]);this.$question.find(y).addClass(c)},__matchWrapHeight:function(){var n=setTimeout(function(){matchWrapHeight()},200)},__setHeightOnSelection:function(){var i=this,h,c,u,y,n,f,l,s,p,w,b,a,v;if(h=i.$minmax.find(o),y=h.filter(".active"),y.length===1&&(v=t),c=i.$minmax.find(".sliderresponseoptions .togglebuttonimg img"),c.length===0){i.heightOnSelection=r;return}for(c=[],u=[],n=0;n<h.length;n++)f=$afe.jq(h[n]),currOptHeight=$$WPQuestionUtil.getElementHeight(f),v&&i.heightOnSelection&&(currOptHeight-=20),l=$$WPQuestionUtil.getElementWidth(f),s=f.find(".togglebuttonimg img"),s.length===1?(c[n]=s,p=s[0].naturalWidth,w=s[0].naturalHeight,l>150&&(l=150),b=w*l/p,u[n]=$$WPQuestionUtil.getElementHeight(f.find(ut))+b):u[n]=currOptHeight;for(a=0,n=0;n<u.length;n++)a=Math.max(a,u[n]);i.heightOnSelection=a+20;v&&i.$minmax.find(g).css(rt,i.heightOnSelection+e)},__doneAnimating:function(){this.animating=i},__changeCss:function(n){var t=this;t.animating?t.__waitToChangeCss(n):t.$sliderBall.css(t.cssPropertyToUpdate,n+e)},__waitToChangeCss:function(n){this.animationTimer=setTimeout($.proxy(function(){var t=this;t.animating||(t.$sliderBall.css(t.cssPropertyToUpdate,n+e),t.animationTimer=0)},this),h)},__getCurrentAnswer:function(n){var t,u,i,f;return this.isCustomList?(i=this.$minmax.find("input:checked"),n?i.length===1?(f=$afe.jq(i.next().find(ut)),t=f.length===1?f.text():i.next().find("img").safeAttr(v)):t=r:t=i.parents(o).data("index")||r):(u=this.$sliderInput.val(),u!==r?(t=$$WP.I18N.parseNumber(u),isNaN(t)?t=n?u:r:n&&(t=t.toString())):t=r),t},__changeAriaLabel:function(n){var t=this;t.isDestroyed||t.ariaLabelTimer||(t.ariaLabelTimer=setTimeout($.proxy(function(){this.__ariaLabelCallback(n)},t),h))},__ariaLabelCallback:function(n){var f="@MYCHART@MAX@",e="@MYCHART@MIN@",o="@MYCHART@CURRSLIDERVALUE@",s="@MYCHART@MAXLABEL@",h="@MYCHART@MINLABEL@",r="Questions",i=this,u;i.isDestroyed||(u=i.__getCurrentAnswer(t),$$WP.Strings.setDefaultNamespace(r),$$WP.Strings.addMnemonic(h,i.minLabel,0,r,0),$$WP.Strings.addMnemonic(s,i.maxLabel,0,r,0),$$WP.Strings.addMnemonic(o,u,0,r,0),i.isCustomList?i.__handleCustomListAriaLabels(n,u):($$WP.Strings.addMnemonic(e,i.minLocal,0,r,0),$$WP.Strings.addMnemonic(f,i.maxLocal,0,r,0),i.__handleNumericAriaLabels(n,u),$$WP.Strings.removeMnemonic(e),$$WP.Strings.removeMnemonic(f)),$$WP.Strings.removeMnemonic(h),$$WP.Strings.removeMnemonic(s),$$WP.Strings.removeMnemonic(o),$$WP.Strings.clearDefaultNamespace(),i.ariaLabelTimer=0)},__handleNumericAriaLabels:function(t,i){var a="Selected",v="aria-valuenow",u=this,y,e,p,c,l,o,h;($$WP.Utilities.UI.IsMobile||$$WP.ApplicationContext===applicationWelcome)&&(y=u.$sliderInput.safeAttr(f),e=u.__getAppropriateAriaLabelNumeric(t,i));p=u.$sliderBall.safeAttr(s);oldValueNum=u.$sliderBall.safeAttr(v);($$WP.Utilities.UI.IsMobile||$$WP.ApplicationContext===applicationWelcome)&&e&&y!==e&&u.$sliderInput.safeAttr(f,e);o=u.minLabelDifferent?"SliderMinWithLabel":"SliderMin";h=u.maxLabelDifferent?"SliderMaxWithLabel":"SliderMax";i||i!==r&&i!==n?(l=$$WP.I18N.parseNumber(i),oldValueNum!==i&&u.$sliderBall.safeAttr(v,i),u.$sliderBall.safeAttr(s,i),($$WP.Utilities.UI.IsMobile||$$WP.ApplicationContext===applicationWelcome)&&(l===u.min?u.$minmax.find(b).safeAttr(f,$$WP.Strings.getForTemplate(o+a)):u.$minmax.find(b).safeAttr(f,$$WP.Strings.getForTemplate(o)),l===u.max?u.$minmax.find(w).safeAttr(f,$$WP.Strings.getForTemplate(h+a)):u.$minmax.find(w).safeAttr(f,$$WP.Strings.getForTemplate(h)))):(c=$$WP.Strings.getForTemplate(ht),p!==c&&u.$sliderBall.safeAttr(s,c),($$WP.Utilities.UI.IsMobile||$$WP.ApplicationContext===applicationWelcome)&&(u.$minmax.find(b).safeAttr(f,$$WP.Strings.getForTemplate(o)),u.$minmax.find(w).safeAttr(f,$$WP.Strings.getForTemplate(h))))},__handleCustomListAriaLabels:function(n,t){var i=this,o,r,u,e;o=i.$sliderBall.safeAttr(f);r=i.__getAppropriateAriaLabelCustomList(n,t);u=i.$sliderBall.safeAttr(s);r&&o!==r&&i.$sliderBall.safeAttr(f,r);t?u!==t&&i.$sliderBall.safeAttr(s,t):(e=$$WP.Strings.getForTemplate(ht),u!==e&&i.$sliderBall.safeAttr(s,e))},__getAppropriateAriaLabelNumeric:function(n,t){var i=this,r;return r=t?i.minLabelDifferent&&i.maxLabelDifferent?"SliderDescriptionWithValueAndLabelsMobile":i.minLabelDifferent?"SliderDescriptionWithValueAndMinLabelMobile":i.maxLabelDifferent?"SliderDescriptionWithValueAndMaxLabelMobile":"SliderDescriptionWithValueNoLabelsMobile":i.minLabelDifferent&&i.maxLabelDifferent?"SliderDescriptionEmptyWithLabelsMobile":i.minLabelDifferent?"SliderDescriptionEmptyWithMinLabelMobile":i.maxLabelDifferent?"SliderDescriptionEmptyWithMaxLabelMobile":"SliderDescriptionEmptyNoLabelsMobile",$$WP.Strings.getForTemplate(r)},__getAppropriateAriaLabelCustomList:function(n,t){var i=this,r;return(n||!t)&&(r=t?i.displayVertically?$$WP.Strings.getForTemplate("VerticalCustomListSliderDescriptionWithValueAndLabelsWeb"):i.isRTL?$$WP.Strings.getForTemplate("HorizontalRTLCustomListSliderDescriptionWithValueAndLabelsWeb"):$$WP.Strings.getForTemplate("HorizontalCustomListSliderDescriptionWithValueAndLabelsWeb"):i.displayVertically?$$WP.Strings.getForTemplate("VerticalCustomListSliderDescriptionEmptyWithLabelsWeb"):i.isRTL?$$WP.Strings.getForTemplate("HorizontalRTLCustomListSliderDescriptionEmptyWithLabelsWeb"):$$WP.Strings.getForTemplate("HorizontalCustomListSliderDescriptionEmptyWithLabelsWeb")),r},__welcomeSpecificSetup:function(){},__pickUpSlider:function(){this.$sliderBall.removeClass("pressed");this.$sliderClickableArea.addClass(a);this.$noResponseClickableArea.addClass(a)},__dropSlider:function(){this.$sliderBall.addClass("pressed");this.$sliderClickableArea.removeClass(a);this.$noResponseClickableArea.removeClass(a)},__activateCurrentSelection:function(n){var r=this,f,o,s=i;if(n){n.hasClass(u)||(f=r.$minmax.find(st),f.length!==1&&(s=t),f.removeClass(u),r.$minmax.find(ct).removeClass(u),n.addClass(u),r.heightOnSelection&&r.$minmax.find(g).css(rt,r.heightOnSelection+e),n.find(".togglebuttonimg").addClass(u));s&&r.__matchWrapHeight();return}r.isCustomList||(o=r.__getCurrentAnswer()-0,o===r.min?(r.$minmax.find(l).removeClass(u),r.$minmax.find(tt).addClass(u)):o===r.max?(r.$minmax.find(tt).removeClass(u),r.$minmax.find(l).addClass(u)):(r.$minmax.find(tt).removeClass(u),r.$minmax.find(l).removeClass(u)))},__deactivateCurrentSelection:function(){var n=this;if(n.isCustomList){n.$question.find(st).removeClass(u);n.$question.find(o).removeClass(u);n.heightOnSelection&&n.$minmax.find(g).css(rt,"auto");n.__matchWrapHeight();return}n.$minmax.find(".min, .max").removeClass(u)}};ot.prototype=bt;$$WP.Questions=$$WP.Questions||{};$$WP.Questions.SliderQuestionController=ot;ot.extend($$WP.Controllers.Controller,"WP$Questions$SliderQuestionController")}(),function(){var b=".content.drawingcontainer .imagecontainer .imgCanvas",e="width",k=".content.drawingcontainer .imagecontainer .imagesection",c=".content.drawingcontainer .imagecontainer",l=".drawingtools .inlinedelete",a=".drawingtools .inlineredo",r="",f="disabled",v=".drawingtools .inlineedit",u="1",d=".pattern",s="cursor",i=!0,y="100%",h="px",o="id",p="canvas",g="load.questions",t=!1,n=null,w=function(n,t,i,r,u){var f=this;f.WP$Controllers$Controller();f.$annotatedImage=n;f.$validationElement=t;f.$commentElement=i;f.questionId=r;f.imagePath=u;f.initialize()},nt=550,tt={COLOR_MAPPING:n,maxWidth:n,questionId:n,clickX:n,clickY:n,clickDrag:n,colorArray:n,patternArray:n,tempClickX:[],tempClickY:[],tempClickDrag:[],tempColorArray:[],tempPatternArray:[],imagePath:n,$annotatedImage:n,$validationElement:n,$commentElement:n,$container:n,$canvas:n,image:n,imageWidth:n,context:n,offset:n,scale:n,draw:n,leftCanvas:n,canvasPatterns:n,pattern:n,color:n,start:n,prevX:n,prevY:n,$prevpattern:n,tgtWidth:n,loaded:n,drawnAll:t,isDestroyed:t,initialize:function(){var n=this;if(n.$annotatedImage){n.pattern="-1";n.image=n.$annotatedImage[0];n.COLOR_MAPPING={1:"#000000",2:"#FF0000",3:"#FF6A00",4:"#FFD800",5:"#267F00",6:"#0025FF",7:"#B200FF",8:"#803300",9:"#808080",10:"#FF00DC",11:"#FFFFFF",12:"#00FFFF"};n.$annotatedImage.on(g,$.proxy(n.startDrawing,n));n.$annotatedImage.safeAttr("src",makeLink(n.imagePath));n.$container=n.$annotatedImage.parents(".drawingcontainer").first();n.image.complete&&n.startDrawing()}},startDrawing:function(){var n=this,r,f,u,e;u=n.$annotatedImage;n.draw=t;n.$annotatedImage.off(g);r=$afe.jq(document.createElement(p));r.safeAttr(o,p+u.safeAttr(o).substr(5));r.safeAttr("class","imgCanvas");r.safeAttr("aria-hidden","true");n.setImageWidth();f=n.$container;$$WP.Utilities.UI.IsMobile&&f.find(".imagecontainer").css("max-width",n.imageWidth+h);r.css({"max-width":n.maxWidth+h,width:y});r.safeInsertAfter(u);n.setTargetWidth();n.setScale();e=r[0].getContext("2d");n.context=e;n.scaleCanvasSize(n.image,r[0],n.tgtWidth);n.$canvas=r;n.setOffset();n.__initDrawingData();n.__initPatterns();n.__initUndo();n.__initRedo();n.__initDelete();n.__redrawFromSavedImage();n.updateValidationElement(t);n.__setUpMouseHandling();initTouch(n.$canvas);$afe.jq(document).mouseup($.proxy(function(){this.draw=t},n));n.loaded=i;matchWrapHeight();$afe.jq(window).trigger("resetDrawingOffset")},destroy:function(){var t=this;t.$canvas&&(t.$canvas.off("mousedown mouseover mouseup touchstart touchmove touchend touchcancel"),t.$canvas.css(s,"unset"));t.$container.find(d).off("click");t.__disableUndoAndClear();t.clickX=[];t.clickY=[];t.clickDrag=[];t.patternArray=[];t.colorArray=[];t.$annotatedImage=n;t.image=n;t.$commentElement=n;t.$validationElement=n;t.$canvas=n;t.$container=n;t.isDestroyed=i},__initPatterns:function(){this.canvasPatterns=[];var n=this;this.$container.find(d).each(function(){var r=$afe.jq(this),f=r.safeAttr(o),t,i,e;f&&(t=f.split("_"),i=t[1],e=t[2],i!==u&&(n.canvasPatterns[i]=n.context.createPattern(r.find("img.image")[0],"repeat")))}).click(function(){var f="images/square.cur",e="'), crosshair",h="images/patterns/Pen",t="url('",c="selected",r=$afe.jq(this),i=r.safeAttr(o).split("_");n.$prevpattern&&n.$prevpattern.removeClass(c);r.addClass(c);n.pattern=i[1];n.color=i[2];n.$prevpattern=r;n.pattern===u?(n.$canvas.css(s,t+makeStaticLink(h+i[3]+".cur")+e),n.$canvas.css(s,t+makeStaticLink(h+i[3]+".cur")+"') 0 20, crosshair")):(n.$canvas.css(s,t+makeStaticLink(f)+e),n.$canvas.css(s,t+makeStaticLink(f)+"') 7.5 7.5, crosshair"))}).first().click()},__initUndo:function(){var n=this,t=n.$container.find(v);t.click($.proxy(function(){var n=this;if(n.clickX.length!==0){while(n.clickDrag[n.clickDrag.length-1]===u)n.removeClick();n.removeClick();n.tempClickX.length>0&&n.__enableRedo();n.drawAll();n.updateValidationElement(i)}},n));n.clickX&&n.clickX.length!==0||t.safeAttr(f,r)},__initRedo:function(){var n=this.$container.find(a);n.click($.proxy(function(){var n=this,r,f,e=t;if(n.tempClickX.length!==0){for(n.clickX.length===0&&(e=i),r=n.tempClickX[n.tempClickX.length-1]*n.scale+n.offset.left,f=n.tempClickY[n.tempClickY.length-1]*n.scale+n.offset.top,n.addClick(r,f,"0",n.tempColorArray[n.tempColorArray.length-1],n.tempPatternArray[n.tempPatternArray.length-1]),n.tempClickX.pop(),n.tempClickY.pop(),n.tempClickDrag.pop(),n.tempColorArray.pop(),n.tempPatternArray.pop();n.tempClickDrag[n.tempClickDrag.length-1]===u;)r=n.tempClickX[n.tempClickX.length-1]*n.scale+n.offset.left,f=n.tempClickY[n.tempClickY.length-1]*n.scale+n.offset.top,n.addClick(r,f,u,n.tempColorArray[n.tempColorArray.length-1],n.tempPatternArray[n.tempPatternArray.length-1]),n.tempClickX.pop(),n.tempClickY.pop(),n.tempClickDrag.pop(),n.tempColorArray.pop(),n.tempPatternArray.pop();n.drawAll();e&&n.__enableUndoAndClear();n.tempClickX.length===0&&n.__disableRedo();n.updateValidationElement(i)}},this));n.safeAttr(f,r)},__initDelete:function(){var t=this,i=t.$container.find(l);i.click($.proxy(function(){var u="continue",i="Questions",t=this;t.clickX&&t.clickX.length!==0&&($$WP.ApplicationContext===applicationWelcome?t.__clearDrawing():$$WPUtil.quickMessageBox($$WP.Strings.get("DrawingClearWarning",i),r,[new $$WPComp.ComplexObjects.Button($$WP.Strings.get("DrawingClearContinue",i),n,"inlinedelete",u),new $$WPComp.ComplexObjects.Button($$WP.Strings.get("DrawingGoBack",i),n,"previousstep","cancel")],$.proxy(function(n,t){t===$$WPComp.TOOLBARIDENTIFIER+u&&this.__clearDrawing()},t),[t]))},t));t.clickX&&t.clickX.length!==0||i.safeAttr(f,r)},__clearDrawing:function(){var n=this;n.clickX=[];n.clickY=[];n.clickDrag=[];n.colorArray=[];n.patternArray=[];n.scaleCanvasSize(n.image,n.$canvas[0],n.tgtWidth);n.__disableUndoAndClear();n.__clearTempArrays();n.__disableRedo();n.updateValidationElement(i)},__clearTempArrays:function(){var n=this;n.tempClickX=[];n.tempClickY=[];n.tempClickDrag=[];n.tempColorArray=[];n.tempPatternArray=[]},__enableUndoAndClear:function(){var n=this.$container.find(v),t=this.$container.find(l);n.removeAttr(f);t.removeAttr(f)},__enableRedo:function(){var n=this.$container.find(a);n.removeAttr(f)},__disableUndoAndClear:function(){var n=this.$container.find(v),t=this.$container.find(l);n.safeAttr(f,r);t.safeAttr(f,r)},__disableRedo:function(){var n=this.$container.find(a);n.safeAttr(f,r)},__initDrawingData:function(){var t=this,n;n=t.$container.find(".drawingdata [name='clickX']").val();t.clickX=n.length>0?n.split(","):[];n=t.$container.find(".drawingdata [name='clickY']").val();t.clickY=n.length>0?n.split(","):[];n=t.$container.find(".drawingdata [name='dragging']").val();t.clickDrag=n.length>0?n.split(","):[];n=t.$container.find(".drawingdata [name='color']").val();t.colorArray=n.length>0?n.split(","):[];n=t.$container.find(".drawingdata [name='pattern']").val();t.patternArray=n.length>0?n.split(","):[]},__redrawFromSavedImage:function(){var n=this;n.start=0;n.prevX=-30;n.prevY=-30;n.redraw(t,n.start)},__setUpMouseHandling:function(){var n=this;n.__addMousedownEvent();n.$canvas.mousemove($.proxy(function(n){var r=this,f=t;r.draw===i&&(f=r.addClick(n.pageX,n.pageY,r.leftCanvas?"0":u),f&&(r.__clearTempArrays(),r.__disableRedo(),r.drawOne(r.clickX.length),r.leftCanvas=t))},n)).mouseup($.proxy(function(){this.draw=t;this.leftCanvas=t},n)).mouseleave($.proxy(function(){this.leftCanvas=i},n))},__addMousedownEvent:function(){this.$canvas.mousedown($.proxy(function(n){this.setOffset();this.__defaultMousedownHandler(n)},this))},__defaultMousedownHandler:function(n){var r=this;r.__clearTempArrays();r.__disableRedo();r.draw=i;r.leftCanvas=t;r.addClick(n.pageX,n.pageY,"0");r.drawOne(r.clickX.length);r.updateValidationElement(i);r.__enableUndoAndClear()},setImageWidth:function(){var n=this;n.imageWidth=n.$annotatedImage[0].naturalWidth;n.maxWidth=Math.min(n.imageWidth,nt)},setTargetWidth:function(){var n=this,t;t=$afe.select('.question.drawing[data-lql="'+n.questionId+'"]');n.tgtWidth=$$WP.Utilities.UI.IsMobile?n.__getTargetWidthForMobile(t):isDataTile()?n.__getTargetWidthForDataTiles(t):$$WP.ApplicationContext===applicationWelcome?n.__getTargetWidthForWelcome(t):n.__getTargetWidthForWeb()},__getTargetWidthForMobile:function(n){return n.find(c).width()},__getTargetWidthForDataTiles:function(n){var t,i,r;return i=n.find(k),r=i.css(e),i.css(e,y),t=n.find(b).width(),t=t||n.find(c).width(),i.css(e,r),t},__getTargetWidthForWelcome:function(n){var t,i,r;return i=n.find(k),r=i.css(e),i.css(e,y),t=n.find(b).width(),t=t||n.find(c).width(),i.css(e,r),t},__getTargetWidthForWeb:function(){return this.tgtWidth||Math.min(this.maxWidth,this.imageWidth)},setScale:function(){var n=this,t;n.imageWidth<n.tgtWidth?n.scale=n.tgtWidth/n.imageWidth:n.imageWidth===n.tgtWidth?n.scale=1:(t=n.tgtWidth/n.imageWidth,n.scale=n.imageWidth<n.maxWidth?t:n.tgtWidth/n.maxWidth)},drawAll:function(){var n=this;n.start=0;n.drawnAll=i;n.scaleCanvasSize(n.image,n.$canvas[0],n.tgtWidth);n.redraw(t,0);n.drawnAll=n.$canvas.is(":visible")},drawOne:function(n){var t=this,h,r,f,e,o,s;r=10*t.scale;f=7.5*t.scale;e=15*t.scale;t.patternArray[n-1]&&(t.patternArray[n-1]===u?t.redraw(i,n-1):(o=t.clickX[n-1]*t.scale,s=t.clickY[n-1]*t.scale,(Math.abs(o-t.prevX)>r||Math.abs(s-t.prevY)>r)&&(h=t.patternArray[n-1],t.context.fillStyle=t.canvasPatterns[h],t.context.fillRect(o-f,s-f,e,e),t.context.beginPath())))},redraw:function(n,t,i,r){var f=this,e,c,l,a,o,s,h;for(i=i||f.context,r=r||f.scale,i.lineJoin="round",i.lineWidth=3,o=10*r,s=7.5*r,h=15*r,e=t;e<f.clickX.length;e++)f.patternArray[e]&&(f.patternArray[e]===u?(c=f.colorArray[e],l=f.COLOR_MAPPING[c],i.beginPath(),f.clickDrag[e]===u&&e?i.moveTo(f.clickX[e-1]*r,f.clickY[e-1]*r):i.moveTo(f.clickX[e]*r-1,f.clickY[e]*r),i.lineTo(f.clickX[e]*r,f.clickY[e]*r),i.closePath(),i.strokeStyle=l,i.stroke()):n||(Math.abs(f.clickX[e-1]*r-f.prevX)>o||Math.abs(f.clickY[e-1]*r-f.prevY)>o||e===0)&&(a=f.patternArray[e],i.fillStyle=f.canvasPatterns[a],i.fillRect(f.clickX[e]*r-s,f.clickY[e]*r-s,h,h),i.beginPath()))},scaleCanvasSize:function(n,t,i){var r;i=i||this.maxWidth;n.naturalWidth<=i?(t.width=n.naturalWidth,t.height=n.naturalHeight):(r=i/n.naturalWidth,t.width=n.naturalWidth*r,t.height=n.naturalHeight*r);$imageSection=$(t).parents(".imagesection").first();$imageSection.css("height",t.height+h);$imageSection.css(e,t.width+h)},addClick:function(n,r,u,f,e){var o=this,s,h,c,l;return o.clickX.length>=2500?t:(s=o.offset.left,h=o.offset.top,c=o.offset.left+o.$canvas[0].width,l=o.offset.top+o.$canvas[0].height,n<s||n>c||r<h||r>l)?(o.leftCanvas=i,t):(n=Math.round((n-o.offset.left)/o.scale),r=Math.round((r-o.offset.top)/o.scale),o.clickX.push(n),o.clickY.push(r),o.clickDrag.push(u),o.colorArray.push(f||o.color),o.patternArray.push(e||o.pattern),u||o.clickX.length>0&&(o.start=o.clickX.length),i)},removeClick:function(){var n=this;n.tempClickX.push(n.clickX.pop());n.tempClickY.push(n.clickY.pop());n.tempClickDrag.push(n.clickDrag.pop());n.tempColorArray.push(n.colorArray.pop());n.tempPatternArray.push(n.patternArray.pop());n.clickX.length===0&&n.__disableUndoAndClear()},updateValidationElement:function(n){var t=this;t.$validationElement&&t.$commentElement&&(t.clickX&&t.clickX.length||t.$commentElement.val()?t.$validationElement.val(u):t.$validationElement.val(r),n&&t.$validationElement.trigger("blur"))},setOffset:function(n){var t=this,i;t.isDestroyed||(i=t.$canvas.offset(),i)&&(i.top=Math.round(i.top),i.left=Math.round(i.left),t.offset=i,t.setTargetWidth(),t.setScale(),t.loaded&&n&&t.drawAll())},getDrawingResponse:function(){var n=this,u={};return u.XValues=n.clickX,u.YValues=n.clickY,u.Dragging=n.clickDrag,u.Colors=n.colorArray,u.Patterns=n.patternArray,n.$container&&(n.$canvas&&(n.$container.find(".patternscontainer .pattern[data-baselocalebuttonprompt]").length?(u.OverrideCanvasData=n.getCanvasData(t),u.CanvasData=n.getCanvasData(i)):u.CanvasData=n.getCanvasData(t)),u.Comments=(n.$container.find(".drawingcomment").val()||r).replace(/\s+$/,r)),u},addLegend:function(n,i){var f=this,e,s,c,r,a,y,l,p,w=f.$container,v=w.find(".patternscontainer .pattern"),h=2;s=0;c=0;n.width=f.$canvas[0].width/f.scale;n.width<=225&&(h=1);y=v.length/h;a=y*30+(v.length%h==0?15:30);e=f.$canvas[0].height/f.scale;n.height=e+a;r=n.getContext("2d");r.fillStyle="#ffffff";r.fillRect(0,0,n.width,e);try{l=f.image;r.drawImage(l,0,0,l.naturalWidth,l.naturalHeight,0,0,n.width,e);f.redraw(t,0,r,1)}catch(b){}r.fillStyle="#e7e7e7";r.fillRect(0,e,n.width,a);p=f.COLOR_MAPPING;v.each(function(){var t=$afe.jq(this),a,v,y,f,l,w;a=t.safeAttr(o);a&&(v=a.split("_"),y=v[1],l=e+10+c*30,f=10+s*((n.width-10)/h),y===u?(w=v[2],r.fillStyle=p[w],r.fillRect(f,l,25,25)):r.drawImage(t.find(".image")[0],f,l),r.fillStyle="black",r.font="16px Arial",r.fillText(i?t.data("baselocalebuttonprompt"):t.text(),f+30,l+15,(n.width-10)/h-30),s===h-1?(s=0,c=c+1):s=s+1)})},getCanvasData:function(n){var t,i,u;return t=$afe.jq(document.createElement(p)),n?t.safeAttr(o,"baseLegend"+this.$canvas[0].id):t.safeAttr(o,"legend"+this.$canvas[0].id),t.safeAttr("class","legendCanvas"),i=t[0],this.addLegend(i,n),u=i.toDataURL("image/png"),u.replace("data:image/png;base64,",r)}};w.prototype=tt;$$WP.Questions=$$WP.Questions||{};$$WP.Questions.DrawingQuestionController=w;w.extend($$WP.Controllers.Controller,"WP$Questions$DrawingQuestionController")}(),function(){var et="mouseup.questions",ot="resize.questions resetFollowUpQuestionsStyling",k="resize.questions",l="click",d="checked",g="change",st="collapsibleShown collapsibleCollapsed",s="disabled",ht=":checked",c="input",nt="_buttons_other']",a="_buttons']",f="input[id*='_",v="input[name='",ct="div[data-lql='",lt="MSPQADDRESS",at="matchColumnHeights",vt="data-validation-settings",tt="none",y="display",p="[data-lql]",u="']",h="[data-lql='",w="function",yt=".matchHeights",o="required",it="true",rt="aria-required",n=!0,t=!1,r=null,e=$$WP.Questions.QuestionTypeEnum,i=$$WP.Questions.ResponseTypeEnum,ut=$$WP.Questions.BaseQuestion,pt=$$WP.Questions.FreeTextQuestion,wt=$$WP.Questions.DateQuestion,bt=$$WP.Questions.DrawingQuestion,kt=$$WP.Questions.TimeQuestion,dt=$$WP.Questions.NumericQuestion,gt=$$WP.Questions.CustomListQuestion,ni=$$WP.Questions.CategoryINIQuestion,ti=$$WP.Questions.YesNoQuestion,ii=$$WP.Questions.TimeWithUnitsQuestion,ri=$$WP.Questions.UploadQuestion,ui=$$WP.Questions.GroupQuestion,fi=$$WP.Questions.AddressQuestion,ei=$$WP.Questions.DrawingQuestionController,oi=$$WP.Questions.SliderQuestionController,si=$$WP.Questions.AccordionController,b=r,ft=function(n,t,i,r,u,f){var e=this;e.WP$Controllers$Controller();e.$root=n;e.afterLoadCallback=i;e.hqaId=u;e.allowIframes=f;e.initialize(t,r)},hi={$root:r,QuestionViewBinder:r,QuestionCollection:r,DrawingQuestionCollection:r,SliderQuestionCollection:r,AccordionControllerCollection:r,afterLoadCallback:r,questionConditionCallback:r,hqaId:r,ready:t,isDestroyed:t,allowIframes:t,initialize:function(i,r){var u=this;u.QuestionCollection=ut.createQuestionCollection();u.QuestionViewBinder=new $$WP.Questions.QuestionViewBinder(["OtherSelected"]);u.DrawingQuestionCollection=[];u.SliderQuestionCollection=[];u.AccordionControllerCollection=[];u.questionConditionCallback=r;u.proxify("_questionConditionCallback");u._convertRawQuestionsToCollection(i,u.QuestionCollection,u._questionConditionCallback);u.QuestionViewBinder.setBindingRoot(u.$root);u.QuestionViewBinder.bindAllModels(u.QuestionCollection.Models);u.isDestroyed=t;u.render();u.afterRender();u.ready=n},render:function(){var n=this,t;n.isDestroyed||(t=$afe.renderTemplate($$WP.Templates.Questions.QuestionsList,n.QuestionCollection),$$WP.ApplicationContext===applicationWelcome&&$$WP.Utilities.UI.SandboxHtml(t,n.allowIframes),n.$root.safePrepend(t),matchWrapHeight(),$afe.select("legend.required").safeAttr(rt,it),$afe.select("legend.required + div input").safeAttr(o,it))},afterRender:function(){var i=this,u,v,e,y,p,s,b,k,h,d,g,c,nt,tt,l,f,rt,ut,ft,et,ot,it,st,a;if(!i.isDestroyed){if(u=i.$root,u.find(yt).each($$WP.Utilities.UI.Cards.MatchHeights),$$WP.Utilities.UI.IsMobile){for(u.find(".question .answers > textarea, .question .answers > input, .question .answers > select").parent().addClass("inputparent"),u.find(".questiongroup[class*='column_']").removeClass("column_1 column_2 column_3 column_4"),v=$afe.select(".questiongroup > legend + .answers.cardlist"),e=0;e<v.length;e++)y=$afe.jq(v[e]),y.prev().safePrependTo(y);for(k=$afe.select(".questiongroup .answers .card > .messagedisplay"),h=0;h<k.length;h++)d=$afe.jq(k[h]),d.safeInsertAfter(d.parent().find(".group-yes-no-answers"));for(p=$afe.select(".questiongroup > .answers > .card > legend"),s=0;s<p.length;s++)b=$afe.jq(p[s]),b.next().safePrepend(b);for($$WP.ApplicationContext!==applicationWelcome&&u.find(".question.SINGLEROW").removeClass("SINGLEROW").addClass("SINGLECOLUMN"),u.find(".question legend.required > span.question-prompt, .question legend.required > label > span.question-prompt, .card legend.required > span.question-prompt").addClass(o),g=$afe.select(".question.timeWithUnits .answers .validationMessages > .messagedisplay.box"),c=0;c<g.length;c++)nt=$afe.jq(g[c]),nt.safeInsertAfter(nt.parent().parent().find("input[type='text']"));for(tt=u.find(".question.drawing"),l=0;l<tt.length;l++)f=$afe.jq(tt[l]),rt=f.find(".drawingtools"),ut=f.find(".imagecontainer"),ft=f.find(".editdrawingbuttons"),et=f.find(".patternscontainer"),ot=f.find(".commentsection"),it=f.find(".drawingdata"),st=f.find(".imagecontainer > .messagedisplay"),rt.safePrepend(ut),ft.safeInsertBefore(et),ot.safeInsertBefore(it),st.safeInsertBefore(it);$$WP.Utilities.Mobile.MobileOptimize()}else($$WP.Utilities.UI.IsMobile||WP.DOM.Browser.isMobile||$$WP.ApplicationContext===applicationWelcome)&&$$WPUtil.UseHTML5InputControls();for($$WP.FormValidation.initializeDOMSubtree(u),$$WP.ApplicationContext===applicationWelcome&&u.find(".questiongroup > .answers[class*='column_3'],.questiongroup > .answers[class*='column_4']").removeClass("column_3 column_4").addClass("column_2"),u.find(".date input[type=date], .time input[type=time]").each(function(){this.value=this.defaultValue;this.defaultValue=""}),i.__handleSingleRowQuestionsOverflow(),a=0;a<i.QuestionCollection.Models.length;++a)i._initQuestionControls(i.QuestionCollection.Models[a]);i.__addDrawingQuestionListeners();i.__addSliderQuestionListeners();i.__addGroupQuestionListeners();i.__addSingleRowQuestionListeners();i.__addFollowUpQuestionListeners();$$WP.FormValidation.initializeDOMSubtree(u,t,n);i.__callFollowUpQuestionAfterValidation();i.afterLoadCallback!==r&&typeof i.afterLoadCallback===w&&i.afterLoadCallback()}},destroy:function(){var t=this;t.isDestroyed||(t.$root=r,t.QuestionCollection=[],t.__destroyDrawingQuestions(),t.DrawingQuestionCollection=[],t.__destroySliderQuestions(),t.SliderQuestionCollection=[],t.__removeSingleRowQuestionListeners(),t.__removeFollowUpQuestionListeners(),t.AccordionControllerCollection=[],t.QuestionViewBinder=r,t.isDestroyed=n)},getCoreModelsWithAnswers:function(n){return this.isDestroyed?r:this.QuestionCollection.convertToCoreQuestionArray(n)},callPendingConditionalCallbacks:function(){var i=this,r,t,n,u;if(i.QuestionCollection&&i.QuestionCollection.Models)for(u=0;u<i.QuestionCollection.Models.length;u++)if(n=i.QuestionCollection.Models[u],n.Timer&&(clearTimeout(n.Timer),n.Timer=0,n.AnswerChangedCallback(n)),n.QuestionType===e.Group)for(r=0;r<n.GroupQuestions.Models.length;r++)t=n.GroupQuestions.Models[r],t.Timer&&(clearTimeout(t.Timer),t.Timer=0,t.AnswerChangedCallback(t))},updateQuestions:function(i,f){var ci=".accordion span.question-prompt",li="span.question-prompt",ai=".accordion-body legend",vi="legend, .accordion-heading .header",ti="data-initially-invalid",a=this,kt,ft,v,ht,s,k,et,ii,g,d,yi=[],rt,ut,pi,b,dt,c,l,ri,ui,fi,ot=$afe.jq(),ei,ct,oi,lt=[],si,nt,pt,hi,gt,st=$afe.jq(),wi,ni,wt=$(),bt=$(),bi,ki;if(i&&!a.isDestroyed){for($$WP.Utilities.UI.MatchColumnHeightsOnHideAndShow=t,kt=0;kt<i.length;kt++)for(ft=i[kt],s=r,et=t,k=r,ut=t,ii=t,g=t,d=t,ct=t,rt=[],v=0;v<a.QuestionCollection.Models.length;v++){if(a.QuestionCollection.Models[v].ID===ft.LqlID)s=a.QuestionCollection.Models[v],s.QuestionType===e.Group&&(g=n);else if(a.QuestionCollection.Models[v].QuestionType===e.Group)for(ht=0;ht<a.QuestionCollection.Models[v].GroupQuestions.Models.length;ht++)if(a.QuestionCollection.Models[v].GroupQuestions.Models[ht].ID===ft.LqlID){s=a.QuestionCollection.Models[v].GroupQuestions.Models[ht];et=n;k=a.QuestionCollection.Models[v];ut=a.QuestionCollection.Models[v].ShowGroupQuestionsAsList;ct=a.QuestionCollection.Models[v].GroupQuestionLayout===$$WP.Questions.GroupQuestionDisplayStyle.Table;ii=a.QuestionCollection.Models[v].AreAllQuestionsYesNo&&!ut&!ct;hi=a.QuestionCollection.Models[v].HasAnyFollowUpQuestions;break}if(s){if(b=$afe.select(h+ft.LqlID+u),fi=s.QuestionType!==e.Group||s.ShowGroupQuestionsAsList&&!s.HasAnyFollowUpQuestions,et&&(dt=$afe.select(h+k.ID+u)),c=g&&ut?b.find(".answers.groupAsList > .tbContainer > input"):b.find(".answers > input, .slidersection .slidervalue, .slidersection input.forslider, .answers > textarea, .answers > .tbContainer > input, .drawingValidation, .answers > select, .answers > .time-with-units-buttons > .tbContainer > input, .uploadValidation"),c.length===0&&et&&(c=b.find(".buttonList .tbContainer > input, .group-yes-no-buttons .tbContainer > input, input.groupAsListButton, .groupresponsecolumn input ")),gt=c,g||(c=c.filter(function(){return b.is($afe.jq(this).closest(p))}),gt=gt.not(c)),ft.IsEnabled){if(!s.IsEnabled&&(g?(s.DisabledBecauseChildrenAllDisabled=s._areAllChildrenDisabled(),rt=s._getInvalidInputs(),rt.length>0&&(d=n)):ut?st=st.add(dt):hi?d=n:s._getInvalidInputs().length>0&&(d=n),!g||!s.DisabledBecauseChildrenAllDisabled))for(s.IsEnabled=n,b.css(y,tt).removeClass("jqHidden"),bt=bt.add(b),ii&&b.css(y,"inline-block"),ct&&(oi=n),l=0;l<c.length;l++)$afe.jq(c[l]).safeAttr(ti,it);et&&!k.IsEnabled&&k.DisabledBecauseChildrenAllDisabled&&(k.IsEnabled=n,k.DisabledBecauseChildrenAllDisabled=t,bt=bt.add(dt))}else{if(g?s.DisabledBecauseChildrenAllDisabled=t:ut&&(st=st.add(dt)),s.IsEnabled){for(g?(rt=s._getInvalidInputs(),rt.length>0&&(d=n)):s._getInvalidInputs().length>0&&(d=n),s.IsEnabled=t,wt=wt.add(b),l=0;l<c.length;l++)$afe.jq(c[l]).removeAttr(ti);ct&&(oi=n)}if(et&&k.IsEnabled){for(si=t,nt=0;nt<lt.length;nt++)if(lt[nt].ID===k.ID){si=n;break}si||lt.push(k)}}if(fi)if(ft.IsRequired)s.IsRequired||(d=n),s.IsRequired=n,b.find(vi).not(ai).addClass(o),$$WP.Utilities.UI.IsMobile&&b.find(li).not(ci).addClass(o),s.ShowAsSlider&&s.SliderController.markAsRequired();else{for(s.IsRequired&&(d=n),s.IsRequired=t,b.find(vi).not(ai).removeClass(o),$$WP.Utilities.UI.IsMobile&&b.find(li).not(ci).removeClass(o),l=0;l<c.length;l++)$afe.jq(c[l]).removeAttr(ti);s.ShowAsSlider&&s.SliderController.markAsUnrequired()}if(!ut&&(s._updateValidationSettings(),ui=s._getGroupValidationSettings(),ui&&b.safeAttr("data-validation-group",ui.toJSON()),fi))for(l=0;l<c.length;l++)ei=$afe.jq(c[l]),ri=s._getValidationSettingsForInput(ei),ri&&ei.safeAttr(vt,ri.toJSON());d&&(ot=rt.length?ot.add(rt):ot.add(c),hi&&(ot=ot.add(gt)));break}}for(nt=0;nt<lt.length;nt++)pt=lt[nt],pi=pt._areAllChildrenDisabled(),pi&&(pt.IsEnabled=t,pt.DisabledBecauseChildrenAllDisabled=n,$parentEl=$afe.select(h+pt.ID+u),wt=wt.add($parentEl));bi=wt.hide(250).promise();ki=bt.show(250).promise();$.when(bi,ki).done($.proxy(function(){for(ni=0;ni<st.length;ni++)wi=$afe.jq(st[ni]),$$WP.FormValidation.initializeDOMSubtree(wi,t,n);ot.filter(function(){return document.activeElement===this?t:(name=$afe.jq(this).safeAttr("name"),yi[name]?t:(yi[name]=1,n))}).trigger("validationUpdated",n);this.$root.find(yt).each($$WP.Utilities.UI.Cards.MatchHeights);oi&&this.__updateGroupQuestionStripeOnAttr();$$WP.Utilities.UI.MatchColumnHeightsOnHideAndShow=n;this.__handleSingleRowQuestionsOverflow();$afe.jq(window).trigger(at);f&&typeof f===w&&f()},a))}},_questionConditionCallback:function(n){n.IsTrigger&&n.ResponseType!==i.Upload&&n.ResponseType!==i.TimeWithUnits&&this.questionConditionCallback(n.ID)},_convertRawQuestionsToCollection:function(n,t,u,f){var h=this,c,o,s;if(!h.isDestroyed){for(t.openChangeBatch(),c=0;c<n.length;c++)if((o=n[c],typeof o=="object")&&o!==r){if(o.QuestionType===e.Group)s=new ui(o,u),s.GroupQuestions=ut.createQuestionCollection(),o.GroupQuestions!==r&&(h._convertRawQuestionsToCollection(o.GroupQuestions,s.GroupQuestions,u,o.FollowUpQuestions),s._updateSelectedFlagIfYesNoQuestion(),s._updateLayoutSettings(),s._updateClassName());else if(o.QuestionType===e.Drawing)s=new bt(o,u);else switch(o.ResponseType){case i.Text:s=o.DisplayStyle===lt?new fi(o,u):new pt(o,u);break;case i.Date:s=new wt(o,u);break;case i.Time:s=new kt(o,u);break;case i.Numeric:s=new dt(o,u);break;case i.CustomList:s=new gt(o,u);break;case i.CategoryINI:s=new ni(o,u);break;case i.YesNo:s=new ti(o,u);break;case i.TimeWithUnits:s=new ii(o,u);break;case i.Upload:s=new ri(o,u)}h._convertFollowUpQuestions(o,f,s,u);h.QuestionViewBinder!==r&&s.addViewBinderId(h.QuestionViewBinder.ViewBinderId);t.add(s)}t.closeChangeBatch()}},_convertFollowUpQuestions:function(n,t,i){var r,u,f;if(n.Choices)for(r=0;r<n.Choices.length;r++)(u=n.Choices[r],u.FollowUpQuestions&&u.FollowUpQuestions.length!==0)&&(this._combineFollowQuestionsProperties(t,u.FollowUpQuestions),f=i.Choices.Models[r],f.FollowUpQuestions=ut.createQuestionCollection(),this._convertRawQuestionsToCollection(u.FollowUpQuestions,f.FollowUpQuestions,$.proxy(function(n,t){this._followUpQuestionAnswerChanged(i,n,t)},this)),i._updateFollowUpQuestionsAnswered())},_combineFollowQuestionsProperties:function(t,i){for(var r,u,f,o,s,e=0;e<i.length;e++){for(f=i[e],u=0;u<t.length;u++)if(o=t[u],o.FollowUpQuestionID===f.FollowUpQuestionID){s=n;break}s&&(r={},$.extend(n,r,o),this._copyAnswerForFollowUpQuestion(f,r),r.ID=f.ID,i[e]=r)}},_copyAnswerForFollowUpQuestion:function(n,t){switch(t.ResponseType){case i.Text:t.DisplayStyle===lt?(t.Street1=n.Street1,t.Street2=n.Street2,t.City=n.City,t.States=n.States,t.ZipCode=n.ZipCode):t.Answer=n.Answer;break;case i.Date:case i.Time:case i.Numeric:t.Answer=n.Answer;break;case i.Upload:t.Answers=n.Answers;break;case i.CustomList:case i.CategoryINI:case i.YesNo:t.Choices=n.Choices;break;case i.TimeWithUnits:t.Choices=n.Choices;t.TextAnswer=n.TextAnswer}},_followUpQuestionAnswerChanged:function(n,t){var r="hasFollowUpAnswers",i;!$$WPUtil.IsNullOrEmpty(n.followUpAnswersChanged)&&$.isFunction(n.followUpAnswersChanged)&&n.followUpAnswersChanged(t);i=$afe.jq($afe.select(ct+n.ID+u));n.AnyFollowUpQuestionsAnswered?i.addClass(r):i.removeClass(r)},_initQuestionControls:function(n){var t=this,u,f,o,r,s;if(!t.isDestroyed)if(n.QuestionType===e.Group){if(o=((n.GroupQuestions||{}).Models||[]).length,n.ShowGroupQuestionsAsList&&!n.HasAnyFollowUpQuestions)t.__initButtonControls(n);else for(u=0;u<o;++u)if(r=n.GroupQuestions.Models[u],t._initQuestionControls(r),n.HasAnyFollowUpQuestions)for(t.__initFollowUpControls(r),s=((r.Choices.Models[0].FollowUpQuestions||{}).Models||[]).length,f=0;f<s;++f)t._initQuestionControls(r.Choices.Models[0].FollowUpQuestions.Models[f])}else if(n.QuestionType===e.Drawing)t.__initDrawingControls(n);else switch(n.ResponseType){case i.Text:t.__initFreeTextControls(n);break;case i.Date:t.__initDateControls(n);break;case i.Numeric:t.__initNumericControls(n);break;case i.CustomList:t.__initCustomListControls(n);break;case i.CategoryINI:t.__initCategoryINIControls(n);break;case i.YesNo:t.__initYesNoControls(n);break;case i.TimeWithUnits:t.__initTimeWithUnitsControls(n);break;case i.Upload:t.__initUploadControls(n)}},__initFreeTextControls:function(n){var t=this,i,r,e;i=$afe.jq(t.$root.find(v+n.FormElementName+u));$$WP.Utilities.UI.IsMobile&&(r=n.IsMultiResponse?3e3:1e3,t.__modifyMaxLengthOfInput(i,r));n.HasQuickButtons&&(e=$afe.jq(t.$root.find(f+n.ID+a)),t.__initButtonControls(n,e),t.__updateValidationOnOtherSelected(n),t.__updateInputOnPredefinedOptionsToggled(n))},__updateInputOnPredefinedOptionsToggled:function(i){var r=this,e,l,h,o;e=$afe.jq(r.$root.find(f+i.ID+a));l=$afe.jq(e.filter(f+i.ID+nt));h=$afe.jq(r.$root.find(v+i.FormElementName+u));o=h.parent();e.on(c,$.proxy(function(){var t,i;return t=$afe.jq(l).is(ht),$$WP.Utilities.UI.IsMobile||$$WP.ApplicationContext===applicationWelcome?(i=250,t?$$WP.Questions.Utilities.Collapsible.collapse(o,"show",i):$$WP.Questions.Utilities.Collapsible.collapse(o,"collapse",i)):this.__enableInputField(h,t),n},r));if($$WP.Utilities.UI.IsMobile||$$WP.ApplicationContext===applicationWelcome){o.on("collapsibleShow collapsibleCollapse",$.proxy(function(){e.prop(s,n)},r));o.on(st,$.proxy(function(){e.prop(s,t)},r))}},__updateValidationOnOtherSelected:function(t){var i=this,e,r,o,s;r=$afe.jq(i.$root.find(v+t.FormElementName+u));o=r.parent();e=$afe.jq(i.$root.find(f+t.ID+nt));s=$afe.select(h+t.LqlID+u);e.on("otherOptionToggled",$.proxy(function(){t._updateValidationSettings();r.safeAttr(vt,t.ValidationSettings.toJSON())},i));o.on(st,$.proxy(function(){r.trigger(g,n);$$WP.FormValidation.checkIfFormIsValid(this.$root,n)},i))},__autoSelectOtherOption:function(i,r){var u=$afe.jq(this.$root.find(f+r.ID+nt));i.on(c,$.proxy(function(){return $afe.jq(u).is(ht)||(u.prop(d,n),u.trigger(l,[1,t])),n},this))},__enableInputField:function(i,r){r?(i.removeClass(s),i.prop(s,t)):(i.addClass(s),i.prop(s,n))},__modifyMaxLengthOfInput:function(t,i){t.removeAttr("maxlength");t.on("keydown keypress input",function(t){var r=$afe.jq(this).val();return r.length>i&&t.which!==8&&$afe.jq(this).val(r.substr(0,i)),n})},__initDateControls:function(n){var i=$afe.jq(this.$root.find(f+n.ID+"-date']"));i.next().is("a.datechooserAnchor")||$$WP.Utilities.UI.IsMobile||WP.DOM.Browser.isMobile||writeCalendar(i,"",makeStaticImageLink("calendar.svg"),r,r,r,t)},__initNumericControls:function(n){var i=this,e,r;n.ShowAsSlider?i.__setupSliderControllerInQuestionModel(n,t):n.HasQuickButtons&&(r=$afe.jq(i.$root.find(f+n.ID+a)),i.__initButtonControls(n,r),e=$afe.jq(i.$root.find(v+n.FormElementName+u)),i.__updateValidationOnOtherSelected(n),i.__updateInputOnPredefinedOptionsToggled(n))},__initTimeWithUnitsControls:function(n){var t=$afe.jq(this.$root.find(f+n.ID+a));this.__initButtonControls(n,t)},__initCustomListControls:function(t){var i=this;t.ShowAsSlider?(i.__setupSliderControllerInQuestionModel(t,n),i.__initButtonControls(t)):t.ShowAsSelectDropDown?t.IsMultiResponse?i.__initMultiResponseDropDownControls(t):i.__initSingleResponseDropDownControls(t):(i.__initCustomListWithImageControls(t),i.__initButtonControls(t))},__initCategoryINIControls:function(n){n.ShowAsSelectDropDown?n.IsMultiResponse?this.__initMultiResponseDropDownControls(n):this.__initSingleResponseDropDownControls(n):this.__initButtonControls(n)},__initMultiResponseDropDownControls:function(n){var i,r;if(i=this.$root.find("select[multiple][id='LQL_"+n.ID+u),$$WP.Utilities.UI.IsMobile||(r=i.find("option"),r.mousedown(function(){var r="selected",i=$afe.jq(this),n=i.parent(),u=n.scrollTop();return n.focus(),i.prop(r,!i.prop(r)),setTimeout(function(){n.scrollTop(u)},0),n.focusout(),t})),WP.DOM.Browser.isIE||WP.DOM.Browser.isAndroid)i.on(g,function(){$afe.jq(this).trigger(c)})},__initSingleResponseDropDownControls:function(n){var t;if(WP.DOM.Browser.isIE||WP.DOM.Browser.isAndroid){t=this.$root.find("select[id='LQL_"+n.ID+u);t.on(g,function(){$afe.jq(this).trigger(c)})}},__initYesNoControls:function(n){this.__initButtonControls(n)},__initButtonControls:function(n,t){t=t||$afe.jq(this.$root.find(f+n.ID+"_']"));t.on(l,function(n,t,i){$$WPQuestionUtil.onButtonToggle(n,this,t,i)});if(!(WP.DOM.Browser.isIE||WP.DOM.Browser.isFirefox||WP.DOM.Browser.isEdge)){t.on("keydown",function(n){n.which===32&&(b=this)});t.on("keyup",function(n){if(n.which===32){if(this!==b){b=r;return}b=r;$$WPQuestionUtil.onButtonToggle(n,this)}})}},__initCustomListWithImageControls:function(n){var t=$afe.jq(this.$root.find(".question[data-lql='"+n.ID+"'] .togglebuttonimg img"));t.one("load",function(){$afe.jq(window).trigger(at)})},__initDrawingControls:function(t){var r=".drawingcomment",f=".drawingValidation",i,s,c;t.QuestionType===e.Drawing&&(i=$afe.select(h+t.ID+u),t.controller=new ei(i.find(".annotatedimage"),i.find(f),i.find(r),t.ID,"Image/Load?image="+t.DrawingDetails.ImagePath),this.DrawingQuestionCollection.push(t.controller),$$WP.Utilities.UI.IsMobile&&(s=i.find(r),this.__modifyMaxLengthOfInput(s,3e3)),typeof MutationObserver===w&&(c=new MutationObserver($.proxy(function(n){n.forEach(function(n){var t=$afe.jq(n.target),i=t.closest(p).find(r);i.safeAttr(n.attributeName,t.safeAttr(n.attributeName))})},this)),c.observe(i.find(f).get(0),{attributes:n,attributeFilter:[rt,o]})))},__addDrawingQuestionListeners:function(){$afe.jq(window).on(k,$.proxy(function(){this.__callSetOffsets(isDataTile()||$$WP.Utilities.UI.IsMobile||$$WP.ApplicationContext===applicationWelcome)},this));$afe.jq(window).on("compactHeader.questions deCompactHeader.questions resetDrawingOffset",$.proxy(function(){this.__callSetOffsets(t)},this))},__initFollowUpControls:function(n){var t,i,r;t=$afe.jq(this.$root.find(ct+n.ID+u));i=$afe.jq(this.$root.find("input[id*='"+n.ID+u));r=new si(t,i);this.AccordionControllerCollection.push(r)},__addGroupQuestionListeners:function(){var i=this.$root.find(".groupresponsecolumn");i.unbind(l).on(l,function(i){var f,r,u;r=$afe.jq(i.target);(r.hasClass("prettyradio")||r.hasClass("prettycheck")||r.hasClass("prettylabel"))&&!r.hasClass("container")||(u=$afe.jq(this).find("input.prettyradio, input.prettycheck"),f=u.prop(d)?t:n,u.prop(d,f),u.trigger(c))})},__addSingleRowQuestionListeners:function(){$afe.jq(window).on(k,$.proxy(function(){this.__handleSingleRowQuestionsOverflow(n)},this))},__addFollowUpQuestionListeners:function(){$afe.jq(window).on(ot,$.proxy(function(){this.__updateFollowUpQuestionStyling()},this))},__updateFollowUpQuestionStyling:function(){var n;if(this.ready)for(n=0;n<this.AccordionControllerCollection.length;n++)this.AccordionControllerCollection[n].updateStyling()},__destroyFollowUpQuestions:function(){for(var n=0;n<this.AccordionControllerCollection.length;n++)this.AccordionControllerCollection[n].destroy();this.__removeFollowUpQuestionListeners()},__removeFollowUpQuestionListeners:function(){$afe.jq(window).off(ot)},__destroyDrawingQuestions:function(){for(var t,n=0;n<this.DrawingQuestionCollection.length;n++)t=this.DrawingQuestionCollection[n],t.destroy();this.__removeDrawingQuestionListeners()},__removeDrawingQuestionListeners:function(){$afe.jq(window).off("resize.questions compactHeader.questions deCompactHeader.questions resetDrawingOffset")},__removeSingleRowQuestionListeners:function(){$afe.jq(window).off(k)},__callSetOffsets:function(n){var i=this,t;if(i.ready)for(t=0;t<i.DrawingQuestionCollection.length;t++)i.DrawingQuestionCollection[t].loaded&&i.DrawingQuestionCollection[t].setOffset(n||!i.DrawingQuestionCollection[t].drawnAll)},__callFollowUpQuestionAfterValidation:function(){for(var n=0;n<this.AccordionControllerCollection.length;n++)this.AccordionControllerCollection[n]&&this.AccordionControllerCollection[n].onAfterValidation()},__addSliderQuestionListeners:function(){$afe.jq(window).on("resize.questions compactHeader.questions deCompactHeader.questions resetSliderOffset",$.proxy(function(n){this.__setSliderSizesAndOffsets(n.type)},this));$afe.jq(document).on(et,$.proxy(function(){this.__sliderMouseUp()},this))},__destroySliderQuestions:function(){for(var t,n=0;n<this.SliderQuestionCollection.length;n++)t=this.SliderQuestionCollection[n],t.destroy();this.__removeSliderQuestionListeners()},__removeSliderQuestionListeners:function(){$afe.jq(window).off("resetSliderOffset resize.questions compactHeader.questions deCompactHeader.questions");$afe.jq(document).off(et)},__setSliderSizesAndOffsets:function(n){var t;if(this.ready)for(t=0;t<this.SliderQuestionCollection.length;t++)this.SliderQuestionCollection[t].setSliderSizeAndOffset(n)},__sliderMouseUp:function(){var n;if(this.ready)for(n=0;n<this.SliderQuestionCollection.length;n++)this.SliderQuestionCollection[n].mouseUpEventHandler()},__setupSliderControllerInQuestionModel:function(n,t){var i,r;r=$afe.jq(this.$root.find(".question[data-lql*='"+n.ID+u));i=$$WPQuestionUtil.getSliderElements(r);n.SliderController=new oi(n.ID,i,n.SliderOptions,t);this.SliderQuestionCollection.push(n.SliderController)},__initUploadControls:function(t){var v="focusout",y="textarea[data-model-id='",f=this,e,r,b,s,a,c,l,g;if(t.ResponseType===i.Upload&&(e=f.$root.find(".upload-container[data-model-id='"+t.ModelId+u),e&&e instanceof jQuery)){c=$afe.select(h+t.ID+u);l=f.$root.find(y+t.ModelId+u);c.on(v,function(n){l.is(n.target)||c.get(0).contains(n.relatedTarget)||l.trigger(v)});if(typeof MutationObserver===w){var k="[data-function='upload']:first-child a",d=[rt,o,"aria-invalid"],nt=new MutationObserver($.proxy(function(n){n.forEach(function(n){var t=$afe.jq(n.target),i=t.closest(p).find(k);i.safeAttr(n.attributeName,t.safeAttr(n.attributeName))})},f));nt.observe(l.get(0),{attributes:n,attributeFilter:d});g=new MutationObserver(function(n){n.forEach(function(n){var t=$afe.jq(n.target).closest(p).find(".uploadValidation"),i=$afe.jq(n.addedNodes).find(k);d.forEach(function(n){i.safeAttr(n,t.safeAttr(n))})})});g.observe(c.get(0),{childList:n,subtree:n})}r=new $$WP.Upload.Models.UploadConfiguration;r.ConfigUrl=makeLink("Questions/QuestionUpload/GetFileUploadConfiguration");r.UploadUrl=makeLink("Questions/QuestionUpload/UploadFile");r.EditUrl=makeLink("Questions/QuestionUpload/EditFileName");r.DeleteUrl=makeLink("Questions/QuestionUpload/DeleteFile");a=t.ID;t.FollowUpQuestionID&&(a=t.FollowUpQuestionID);r.ContextData={AnswerId:f.hqaId,QuestionId:a};b=new $$WP.Upload.Controllers.UploadController(e,r,t.Answers);s=$.proxy(f.__forceUpdateUploadTextArea,f,b,f.$root.find(y+t.ModelId+u));r.onConfigSucess=$.proxy(f.__showHelpTextPopupForUploads,f,t);r.onUploadSuccess=s;r.onEditSuccess=s;r.onDeleteSuccess=s}},__forceUpdateUploadTextArea:function(n,t){for(var u=n.getAllDocuments(),i=[],r=0;r<u.length;++r)i.push(u[r].toRawObject());i.length>0?t.val(JSON.stringify(i)):t.val("");t.trigger("blur")},__showHelpTextPopupForUploads:function(n,t){var i=this.$root.find(".question--upload-config-info[data-model-id='"+n.ModelId+u),r;i&&i.length>0&&($$WP.$body.length===0&&($$WP.$body=$afe.select("body")),r=new $$WP.UI.InfoBubble($$WP.UI.InfoBubble.SimpleInfoBubble(t.AllowedDocumentsHelperText)),i.empty().safeAppend($afe.renderTemplate($$WP.Templates.UI.InfoBubble,r)))},__updateGroupQuestionStripeOnAttr:function(){var e,o,i,u,f,r;e=this.$root.find(".questiongroup .grouptable");e.each(function(){i=0;r=$afe.jq(this);o=r.find(".grouptablerow");o.each(function(){f=$afe.jq(this);f.css(y)!==tt&&(i++,u=t,i%2==0&&(u=n),f.safeAttr("data-zebrastripeon",u))});i===1||i===0?r.hide():r.css(y)===tt&&r.show()})},__handleSingleRowQuestionsOverflow:function(n){for(var r,i=$afe.select(".SINGLEROW"),t=0;t<i.length;t++)r=$afe.jq(i[t]),this.__resizeSingleRowQuestion(r,n)},__resizeSingleRowQuestion:function(n,t){var i,u,f;i=n.find(".answers .tbContainer");i.length>0&&(i.removeAttr("style"),u=i.first()[0].getBoundingClientRect().width,f=i.last()[0].getBoundingClientRect().width,u!==f&&i.css("max-width",u),t?this.__matchSingleRowButtonHeights(i):$$WPQuestionUtil.waitForImages(r,n,$.proxy(function(){this.__matchSingleRowButtonHeights(i)},this)))},__matchSingleRowButtonHeights:function(n){var t,i;t=n.map(function(){return this.getBoundingClientRect().height}).get();i=Math.max.apply(Math,t);n.css("height",i)}};ft.prototype=hi;$$WP.Questions=$$WP.Questions||{};$$WP.Questions.QuestionsController=ft;ft.extend($$WP.Controllers.Controller,"WP$Questions$QuestionsController")}(),function(){var i=!0,t=!1,n={COLLAPSIBLE:"collapsible",COLLAPSED:"collapsed",TRANSITIONING:"transitioning",SHOWN:"show"},r={COLLAPSIBLE_BUTTONS:"data-collapsible-button",COLLAPSIBLE_TARGET:"data-collapsible-target",COLLAPSIBLE_PARENT:"data-collapsible-parent"},u={SHOW:"collapsibleShow",SHOWN:"collapsibleShown",COLLAPSE:"collapsibleCollapse",COLLAPSED:"collapsibleCollapsed"},h=350,f=function(t){return t.hasClass(n.COLLAPSED)},e=function(t){return t.hasClass(n.SHOWN)},o=function(t){return t.hasClass(n.TRANSITIONING)},p=function(n){for(var u,e,f,o=[],i=$afe.select("["+r.COLLAPSIBLE_BUTTONS+"]"),t=0;t<i.length;t++)f=$afe.jq(i[t]),u=f.safeAttr(r.COLLAPSIBLE_TARGET),e=$afe.select(u).filter(n),u&&e.length>0&&o.push(f);return o},c=function(n){var u="aria-expanded",r;r=p(n);f(n)?$afe.jq(r).each(function(){this.safeAttr(u,t)}):e(n)&&$afe.jq(r).each(function(){this.safeAttr(u,i)})},l=function(n,t){var u,o,i,f,e;if(u=n.safeAttr(r.COLLAPSIBLE_PARENT),u&&(o=$afe.select(u),i=o.find("["+r.COLLAPSIBLE_PARENT+"='"+u+"']").not(n)),e=n.closest(".grid"),f=n.closest(".col-6"),e&&f)return t&&i&&(i=i.filter(function(){return $afe.jq(this).closest(".col-6").is(f)||!$afe.jq(this).closest(".grid").is(e)})),i},w=function(n){var i;return(i=l(n),i)?(i=i.filter($.proxy(function(){return o($afe.jq(this))}),this),i.length!==0):t},s=function(r,e){var s,l;return f(r)?i:o(r)?t:(s=$.Event(u.COLLAPSE),r.trigger(s),s.isDefaultPrevented())?t:(isNaN(e)&&(e=h),r.removeClass(n.SHOWN),r.addClass(n.TRANSITIONING),r.slideUp(e).promise().done(function(){r.removeClass(n.TRANSITIONING);r.addClass(n.COLLAPSED);c(r);l=$.Event(u.COLLAPSED);r.trigger(l)}),i)},a=function(n,t,i){var r;r=l(n,i);r&&r.each(function(){s($afe.jq(this),t)})},v=function(r,f){var s,l;return e(r)?i:o(r)||w(r)?t:(s=$.Event(u.SHOW),r.trigger(s),s.isDefaultPrevented())?t:(isNaN(f)&&(f=h),r.slideDown(f).promise().done(function(){r.removeClass(n.TRANSITIONING);r.addClass(n.SHOWN);c(r);a(r,f,t);l=$.Event(u.SHOWN);r.trigger(l)}),r.removeClass(n.COLLAPSED),r.addClass(n.TRANSITIONING),a(r,f,i),i)},b=function(n,i){return f(n)?v(n,i):e(n)?s(n,i):t},y=function(n,i,r){switch(i.toLowerCase().trim()){case"toggle":return b(n,r);case"show":return v(n,r);case"collapse":return s(n,r);default:return t}},k=function(n,t){n.click(function(n){var i,u,f,e;i=$afe.jq(this);e=i.safeAttr(r.COLLAPSIBLE_BUTTONS);f=i.safeAttr(r.COLLAPSIBLE_TARGET);u=$afe.select(f);u.each(function(){y($afe.jq(this),e,t)});n.stopPropagation()})};$$WP.Questions=$$WP.Questions||{};$$WP.Questions.Utilities=$$WP.Questions.Utilities||{};$$WP.Questions.Utilities.Collapsible=k;$$WP.Questions.Utilities.Collapsible.collapse=y}();$$WP.Questions.Utilities=$$WP.Questions.Utilities||{};$$WPQuestionUtil=$$WP.Questions.Utilities;$$WPQuestionUtil.getSliderElements=function(n){var t={};return t.$question=n,t.$slider=n.find(".slider"),t.$noResponse=n.find(".noresponse"),t.$noResponseLabel=n.find(".noresponselabel"),t.$sliderBall=n.find(".sliderball"),t.$minmax=n.find(".minmax"),t.$sliderInput=n.find(".slidervalue"),t};$$WPQuestionUtil.calculateSliderBallPercent=function(n,t,i,r,u){var f=(n-t)/(i-t);return(r||u)&&(f=1-f),f};$$WPQuestionUtil.onButtonToggle=function(n,t,i,r){var u=$afe.jq(t);if(u.hasClass("forslider")){if(i!==1&&i!==0)return;$$WP.Utilities.UI.ToggleButtonClick(t,n,i,!0);r&&n.preventDefault();n.stopPropagation()}else if(u.parents(".accordion-heading").length>0&&(u.hasClass("togglebutton")||u.hasClass("buttoncheck"))){if(n.type==="keyup")return;$$WP.Utilities.UI.ToggleButtonClick(t,n,i);n.stopPropagation()}else n.type==="keyup"&&$afe.jq(t).is(":checked")&&(r=!0),$$WP.Utilities.UI.ToggleButtonClick(t,n,0,!0),r&&n.preventDefault()};$$WPQuestionUtil.waitForImages=function(n,t,i){var u,r,f;for(n=n||t.find(".togglebuttonimg img"),r=0;r<n.length;r++)n[r].complete||(u=!1);matchWrapHeight();u===!1?f=setTimeout(function(){$$WPQuestionUtil.waitForImages(n,"",i)},250):i&&i()};$$WPQuestionUtil.getElementHeight=function(n){var t;return!n||!n[0]?0:(t=n[0].getBoundingClientRect().height,t?t:0)};$$WPQuestionUtil.getElementWidth=function(n){var t;return!n||!n[0]?0:(t=n[0].getBoundingClientRect().width,t?t:0)};$$WP.Utilities.UI.Cards=function(n){var t=".cardlist.matchHeights";if(!$$WP.Utilities.UI.IsMobile){if(n.type==="load"){$afe.select(".cardlist.hoverable").each($$WP.Utilities.UI.Cards.HandleHoverable);$afe.select("body").on("cardLoad",".cardlist",$$WP.Utilities.UI.Cards.LoadCardlist).on("matchCardHeights",t,$$WP.Utilities.UI.Cards.MatchHeights)}$afe.select(t).each($$WP.Utilities.UI.Cards.MatchHeights)}};$$WP.Utilities.UI.Cards.LoadCardlist=function(){var n=$afe.jq(this);isDataTile()&&n.is(".cardlist.column_3, .cardlist.column_4")&&n.removeClass("column_3 column_4").addClass("column_2");n.hasClass("hoverable")&&$.proxy($$WP.Utilities.UI.Cards.HandleHoverable,n)();n.hasClass("matchHeights")&&$.proxy($$WP.Utilities.UI.Cards.MatchHeights,n)()};$$WP.Utilities.UI.Cards.HandleHoverable=function(){var n=".card",t="hoverable",i=$afe.jq(this);i.hasClass(t)&&i.find(n).each(function(){var i="hover",r=$afe.jq(this);if(!r.prop(t)){r.hover(function(n){n.type==="mouseenter"?$afe.jq(this).addClass(i):$afe.jq(this).removeClass(i)});r.find(".button, [data-id='additem']").on("focus blur",function(t){t.type==="focus"?$afe.jq(this).parentsUntil(n).andSelf().parent(n).addClass(i):$afe.jq(this).parentsUntil(n).andSelf().parent(n).removeClass(i)});r.prop(t,!0)}})};$$WP.Utilities.UI.Cards.MatchHeights=function(){var e="minHeight",f,r,n,i,t,u;if(!$$WP.Utilities.UI.IsMobile&&$$WP.ApplicationContext!==78&&(f=$afe.jq(this),n=f.prop("class"),n=parseInt(n.substr(n.indexOf("column_")+7)),!isNaN(n)))for(r=f.find(".card, .innercard").css(e,""),i=0;i<r.length;i+=n){for(u=r.eq(i).outerHeight(),t=1;t<n;t++)u=Math.max(u,r.eq(i+t).outerHeight());for(t=0;t<n;t++)r.eq(i+t).css(e,u)}};$$WP.Utilities.UI.Map.Support.cards=$$WP.Utilities.UI.Cards