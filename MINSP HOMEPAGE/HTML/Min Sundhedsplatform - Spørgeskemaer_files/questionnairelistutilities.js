/*! Copyright (c) Epic Systems Corporation 2017-2018 */
var __extends=this&&this.__extends||function(){var a=function(c,b){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(c,a){for(var b in a)if(a.hasOwnProperty(b))c[b]=a[b]};return a(c,b)};return function(c,b){a(c,b);function __(){this.constructor=c}c.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),Epic;(function(a){var b;(function(a){var b;(function(d){var i=".screenreadertext",f=".assigned_qnr_text",l="providers",h=true,k="context-type",a=false,g=null,e="click",b="",c="jqHidden",j=".opt_out_qnr_series",m=function(){var o=".mobile_tabbar",n=".qnr_list_table",m="#main > .title";function ListUtility(){}ListUtility.showPageElements=function(a){d.Utility.showElement($afe.select(m));a!==d.CallingApplication.Hyperspace&&d.Utility.showElement($afe.select(".back"));d.Utility.showElement($afe.select(n));d.Utility.showElement($afe.select(j));d.Utility.showElement($afe.select(o))};ListUtility.hidePageElements=function(){d.Utility.hideElement($afe.select(m).addClass(c));d.Utility.hideElement($afe.select(".noquestions").addClass(c));d.Utility.hideElement($afe.select(".questionnairelocked").addClass(c));d.Utility.hideElement($afe.select(n).addClass(c));d.Utility.hideElement($afe.select(j).addClass(c));d.Utility.hideElement($afe.select(o).addClass(c))};ListUtility.addEventHandlers=function(){$afe.select(".opt_out_qnr_series a").safeAttr("href",b).on(e,function(){$$WP.Utilities.TryRedirect(makeLink(HTMLUnencode(d.QuestionnaireUrls.seriesOptOut)),g,"1");return a});$afe.select(".qnr_list_table table .clickable").on("mouseenter",function(){$afe.jq(this).addClass("hover")}).on("mouseleave",function(){$afe.jq(this).removeClass("hover")})};ListUtility.addDescriptions=function(h,g){var b="keypress",a=".infoBubbleWrapper",f,d,c;f=$afe.select(".assignedqnrs tbody .assigned_qnr_description");for(d=0;d<f.length;d++){c=$afe.jq(f[d]);ListUtility.buildDescription("popup_child_div_",c.data("index"),c.data(k),h,c,g);c.find(a).on(e,function(a){ListUtility.listPagePopupClicked(a)});c.find(a).on(b,function(a){a.which===13&&ListUtility.listPagePopupClicked(a)});c.find(".infoBubbleWrapper .infoBubbleBody a").on(b,function(a){a.which===13&&a.stopPropagation()})}};ListUtility.buildDescription=function(f,a,i,h,c,g){if(a===void 0)a=b;var e;e=g.AssignedQuestionnaires[a];switch(i){case d.QuestionnaireContextType.Contact:ListUtility.buildAppointmentDescription(f,a,h,c);break;case d.QuestionnaireContextType.Message:ListUtility.buildMessageDescription(f,a,c);break;case d.QuestionnaireContextType.Series:ListUtility.buildSeriesDescription(c,e);return}};ListUtility.buildAppointmentPopupObject=function(a,e,c,g,i,f,b){return{CallingApp:a,WhatHeader:d.QuestionnaireListHoverHelpTextKeys.AppointmentWhatHeader,WhatDetails:d.QuestionnaireListHoverHelpTextKeys.AppointmentWhatDetails,WhatMnemonics:{ApptType:{Value:e},ApptProvs:{Value:$$WP.Templates.Questionnaire.Providers({CallingApp:a,Providers:c,ForPopup:h}),EncodingType:0}},WhenHeader:d.QuestionnaireListHoverHelpTextKeys.AppointmentWhenHeader,WhenDetails:d.QuestionnaireListHoverHelpTextKeys.AppointmentWhenDetails,WhenMnemonics:{ApptDate:{Value:g},ApptTime:{Value:i},ApptDuration:{Value:f}},WhereHeader:d.QuestionnaireListHoverHelpTextKeys.AppointmentWhereHeader,WhereDetails:d.QuestionnaireListHoverHelpTextKeys.AppointmentWhereDetails,DepartmentsObject:{Departments:b}}};ListUtility.buildAppointmentDescriptionObject=function(b,e,f,c){return{CallingApp:b,DescriptionKeyDate:d.QuestionnaireListHoverHelpTextKeys.AppointmentDescription,DescriptionKeyDateScreenReader:d.QuestionnaireListHoverHelpTextKeys.AppointmentDescriptionScreenReader,DescriptionKeyNoDate:d.QuestionnaireListHoverHelpTextKeys.AppointmentDescriptionNoDate,Date:e,Mnemonics:{ApptType:{Value:f},ApptDate:{Value:e},ApptProvs:{Value:$$WP.Templates.Questionnaire.Providers({CallingApp:b,Providers:c,ForPopup:a}),EncodingType:0},ApptProvsScreenReader:{Value:$$WP.Templates.Questionnaire.Providers({CallingApp:b,Providers:c,ForPopup:a,ForScreenReader:h}),EncodingType:0}}}};ListUtility.buildMessagePopupObject=function(a,b){return{SubjectHeader:d.QuestionnaireListHoverHelpTextKeys.MessageSubjectHeader,Subject:a,SenderHeader:d.QuestionnaireListHoverHelpTextKeys.MessageSenderHeader,Sender:b}};ListUtility.buildMessageDescriptionObject=function(a,b){return{DescriptionKey:d.QuestionnaireListHoverHelpTextKeys.MessageDescription,DescriptionKeyScreenReader:d.QuestionnaireListHoverHelpTextKeys.MessageDescriptionScreenReader,Mnemonics:{MsgProv:{Value:a},MsgDate:{Value:b}}}};ListUtility.buildAppointmentDescription=function(q,o,g,a){var d,c,j,k,h,e,m,n,p;d=a.data("type");c=a.data(l).split("::");j=a.data("date");k=a.data("time");h=a.data("duration");e=a.data("departments").toString().split(",");m=ListUtility.buildAppointmentPopupObject(g,d,c,j,k,h,e);p=$afe.renderTemplate($$WP.Templates.Questionnaire.AppointmentPopup,m,b).get(0).outerHTML;ListUtility.addInfoBubble(q+o,p);n=ListUtility.buildAppointmentDescriptionObject(g,a.data("appt-date"),d,c);a.find("a span + p > span").last().empty().remove();a.find(f).safeAppend($afe.renderTemplate($$WP.Templates.Questionnaire.AppointmentDescription,n,b));a.find(".assigned_qnr_text > span > span.bold + span").last().empty().remove();a.find(".assigned_qnr_text > .screenreadertext > span").last().empty().remove();a.find(i).text(a.find(i).text());ListUtility.buildAppointmentPopupLinks(q+o,d,c,a.data("provider-ids").toString().split(","),j,k,h,a.data("appt-safe-link"),e,g)};ListUtility.buildAppointmentPopupLinks=function(n,v,r,j,t,u,s,l,p,k){var c,o,q,f="#"+n,h=f+" p.apptwhat > a",i=f+" span + a.apptwhen";c=$afe.select(h);for(var m=function(b){var f=$afe.jq(c[b]);f.on(e,function(c){window.open(makeLink(HTMLUnencode(d.QuestionnaireUrls.provBase)+encodeURIComponent(j[b])+HTMLUnencode(d.QuestionnaireUrls.provWidgetParam)),"WWW").focus();c.stopPropagation();return a})},b=0;b<c.length;b++)m(b);if(k!==d.CallingApplication.Hyperspace)$afe.select(i).on(e,function(b){$$WP.Utilities.TryRedirect(makeLink(HTMLUnencode(d.QuestionnaireUrls.apptBase)+encodeURIComponent(l)),g,"1");b.stopPropagation();return a})};ListUtility.buildMessageDescription=function(k,h,a){var c,d,e,g,i,j;c=a.data("sender");d=a.data("subject");e=a.data("msg-date");g=ListUtility.buildMessagePopupObject(d,c);j=$afe.renderTemplate($$WP.Templates.Questionnaire.MessagePopup,g,b).get(0).outerHTML;ListUtility.addInfoBubble(k+h,j);i=ListUtility.buildMessageDescriptionObject(c,e);a.find(f).safeAppend($afe.renderTemplate($$WP.Templates.Questionnaire.MessageDescription,i,b));ListUtility.buildMessagePopupLinks(k+h,e,d,c,a.data("msg-safe-link"),a.data("sender-id"))};ListUtility.buildMessagePopupLinks=function(k,n,l,m,j,h){var b,f="#"+k,i=f+" span + p > a",c=f+" span + p + span + p > a";$afe.select(i).first().on(e,function(b){$$WP.Utilities.TryRedirect(makeLink(HTMLUnencode(d.QuestionnaireUrls.msgBase)+encodeURIComponent(j)),g,"1");b.stopPropagation();return a});if(h)$afe.select(c).on(e,function(b){window.open(makeLink(HTMLUnencode(d.QuestionnaireUrls.provBase)+encodeURIComponent(h)+HTMLUnencode(d.QuestionnaireUrls.provWidgetParam)),"WWW").focus();b.stopPropagation();return a});else{b=$afe.select(c);b.parent().text(b.text())}};ListUtility.buildSeriesDescription=function(b,a){b.find(f).safeAppend(d.Utility.getSeriesDescription(a))};ListUtility.listPagePopupClicked=function(b){WP.Events.preventDefault(b);b.stopPropagation();return a};ListUtility.addInfoBubble=function(d,c){var a;a=new $$WP.UI.InfoBubble($$WP.UI.InfoBubble.SimpleInfoBubble(c,h));$afe.select("#"+d).empty().safeAppend($afe.renderTemplate($$WP.Templates.UI.InfoBubble,a,b))};ListUtility.stringNamespace="QuestionnaireList.MyChart";return ListUtility}();d.ListUtility=m;var n=function(o){var n="#optional_questionnaires";__extends(ListUtilityMobile,o);function ListUtilityMobile(){return o!==g&&o.apply(this,arguments)||this}ListUtilityMobile.modifyPageForMobile=function(a,b){d.Utility.hideElement($afe.select(j).addClass(c));d.Utility.hideElement($afe.select(n).addClass(c));ListUtilityMobile.setUpTabs(a,b);if(a>0){ListUtilityMobile.modifyDueDates();ListUtilityMobile.modifyAssignedDescriptions()}b>0&&ListUtilityMobile.modifyOptionalDescriptions()};ListUtilityMobile.setUpTabs=function(j,i){var h="#assigned_questionnaires",g=".mobile_tabbar .assigned_qnrs",b="selected",f=".mobile_tabbar .optional_qnrs";if(i>0&&j>0){$afe.select("#wrap").after($$WP.Templates.Questionnaire.QuestionnaireTabs());$afe.select(".md_mychartquestionnaire_questionnaires .mobile_tabbar .assigned_qnrs").on(e,function(e){$afe.select(f).removeClass(b);d.Utility.hideElement($afe.select(n).addClass(c));$afe.select(g).addClass(b);d.Utility.showElement($afe.select(h));e.stopPropagation();return a});$afe.select(".md_mychartquestionnaire_questionnaires .mobile_tabbar .optional_qnrs").on(e,function(e){$afe.select(g).removeClass(b);d.Utility.hideElement($afe.select(h).addClass(c));$afe.select(f).addClass(b);d.Utility.showElement($afe.select(n));e.stopPropagation();return a})}else i>0&&d.Utility.showElement($afe.select(n))};ListUtilityMobile.modifyDueDates=function(){var f,c,a,e,g;f=$afe.select(".md_mychartquestionnaire_questionnaires .assignedqnrs tr .secondary");for(c=0;c<f.length;c++){a=$afe.jq(f[c]);a.css("margin-top ","0");e=a.text();if(e===$$WP.Strings.get(d.QuestionnaireListHoverHelpTextKeys.BlankDueDate,m.stringNamespace))a.text(b);else{g=ListUtilityMobile.buildMobileDueDateObject(e);a.empty().safeAppend($afe.renderTemplate($$WP.Templates.Questionnaire.DueDateMobile,g,b))}}};ListUtilityMobile.modifyAssignedDescriptions=function(){var g,e,c,j;g=$afe.select(".md_mychartquestionnaire_questionnaires .assignedqnrs tr .assigned_qnr_description");for(e=0;e<g.length;e++){c=$afe.jq(g[e]);if(c.data(k)===d.QuestionnaireContextType.Contact){c.find(f).empty();j=ListUtilityMobile.buildMobileDescriptionObject(c.data(l).toString().split("::"),b,h,a);c.prepend($afe.renderTemplate($$WP.Templates.Questionnaire.QuestionnaireDescription,j,b));c.find(".qnrcomment > span.bold + span").last().empty().remove();c.find(".screenreadertext > span").last().empty().remove();c.find(i).text(c.find(i).text());c.find(".screenreadertext + .assigned_qnr_text").remove()}else{c.find(f).children().safeAppendTo(c);c.find(f).remove();c.find("[aria-hidden]").addClass("qnrcomment").addClass("assigned_qnr_text").removeAttr("id")}c.find(".popupiconcontainer").empty().remove()}};ListUtilityMobile.modifyOptionalDescriptions=function(){var h,e,f,i;h=$afe.select(".md_mychartquestionnaire_questionnaires .optionalqnrs tr .optional_qnr_description");for(e=0;e<h.length;e++){f=$afe.jq(h[e]);i=ListUtilityMobile.buildMobileDescriptionObject(g,f.text(),a,a);f.parent().append($afe.renderTemplate($$WP.Templates.Questionnaire.QuestionnaireDescription,i,b));f.empty().remove()}d.Utility.hideElement($afe.select(".md_mychartquestionnaire_questionnaires .optionalqnrs tr .secondary").addClass(c))};ListUtilityMobile.buildMobileDescriptionObject=function(a,c,d,b){return{ForAssigned:d,Description:c,Mnemonics:{ApptProvs:{Value:$$WP.Templates.Questionnaire.Providers({Providers:a,ForPopup:b}),EncodingType:0},ApptProvsScreenReader:{Value:$$WP.Templates.Questionnaire.Providers({Providers:a,ForPopup:b,ForScreenReader:h}),EncodingType:0}}}};ListUtilityMobile.buildMobileDueDateObject=function(a){return{Mnemonics:{DueDate:{Value:a,EncodingType:0}}}};return ListUtilityMobile}(m);d.ListUtilityMobile=n})(b=a.Questionnaire||(a.Questionnaire={}))})(b=a.PatientEngagement||(a.PatientEngagement={}))})(Epic||(Epic={}))