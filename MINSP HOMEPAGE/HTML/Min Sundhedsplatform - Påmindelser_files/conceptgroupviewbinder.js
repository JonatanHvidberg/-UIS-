/*! Copyright (c) Epic Systems Corporation 2017-2019 */
(function ClassDefinition(){var c="Expanded",g="IsSmsOff",f="MediasSubscription",e="mouseleave",d="mouseenter",b="touchstart",a="keypress",h=function ConceptGroupViewBinder(){var h=this;h.WP$Common$ViewBinder(["click",a,b,d,e,"focus","blur"],[f,g,c]);h._statePropertyName=c;h.proxify("_collapseList","_isModelExpanded");h._expanded=1;h._collapsed=0},j={_onPropertyChanged:function _onPropertyChanged(a,j){var r=".disabletext",q=".mediacount",e="hidden",k="title",p="aria-checked",o="@MYCHART@ROWTITLE@",n="@MYCHART@MEDIA@",m=".mediabutton",i=this,l,h,d,b;d=$$WP.Strings.getNamespace("Preferences");if(j.propertyName===f){h=j.index;l=i.getBoundElements(a).find(".groupitem div[data-mediacategoryvalue="+h+"]");b=l.find(m);d.addMnemonic(n,d.getKeyedString("MediaDescription",h),$$WP.Strings.EncodingTypes.None);d.addMnemonic(o,a.Title,$$WP.Strings.EncodingTypes.None);d.addMnemonic("@MYCHART@MEDIATOTALCOUNT@",a.MediasSubscription[h].NumberOfAvaliableSubscription,$$WP.Strings.EncodingTypes.None);d.addMnemonic("@MYCHART@MEDIASELECTEDCOUNT@",a.MediasSubscription[h].NumberOfSubscription,$$WP.Strings.EncodingTypes.None);if(a.MediasSubscription[h].Preference()===$$WP.Preferences.Communications.Concept.preferenceType.NotApproved)b.removeClass("checked").safeAttr(p,"false");else b.addClass("checked").safeAttr(p,"true");if(a.MediasSubscription[h].NumberOfSubscription==0)b.safeAttr(k,d.getString("GroupMediaOptInDescription"));else if(a.MediasSubscription[h].NumberOfAvaliableSubscription>a.MediasSubscription[h].NumberOfSubscription)b.safeAttr(k,d.getString("GroupMediaOptInPartialDescription"));else b.safeAttr(k,d.getString("GroupMediaOptOutDescription"));l.find("span.mediacount").text(d.getString("GroupMediaCountSubheader"));!i._isModelExpanded(a)&&a.setProperty(i._statePropertyName,i._expanded);d.removeMnemonic(n);d.removeMnemonic(o)}else if(j.propertyName===g){l=i.getBoundElements(a).find(".groupitem div[data-mediacategoryvalue=100]");b=l.find(m);if(l.length===0)return;if(j.to){b.addClass(e);b.siblings(q).addClass(e);b.siblings(r).removeClass(e)}else{b.removeClass(e);b.siblings(q).removeClass(e);b.siblings(r).addClass(e)}}else if(j.propertyName===c){i._isModelExpanded(a)&&i._collapseOthers(a);i.WP$Common$ExpandableListViewBinder$_onPropertyChanged(a,j);var s=i.getBoundElements(a).find(".leftcolumn[aria-expanded]");s.safeAttr("aria-expanded",j.to===1?"true":"false")}},_onSyncModelToDOM:function _onSyncModelToDOM(a){this.WP$Common$ExpandableListViewBinder$_onSyncModelToDOM(a)},_onDomEvent:function _onDomEvent(g,k,c){var f="hover",l=$afe.jq(c.target),j,n,h;if(c.type===a&&c.keyCode!==13&&c.keyCode!==32)return;if(c.type===a||c.type==="click"||c.type===b){k.addClass(f);if(l.is(".groupitem div.mediabutton")){n=l.parent();j=n.safeAttr("data-mediacategoryvalue");h=g.MediasSubscription[j];if(g.IsSmsOff&&j===$$WP.Preferences.Communications.Controller.MediaEnum.Text){c.preventDefault();return}if(h.NumberOfAvaliableSubscription===h.NumberOfLockedOnSubscription){c.preventDefault();return}if(h.NumberOfAvaliableSubscription>h.NumberOfSubscription)g.turnOnOffMedia(j,true);else g.turnOnOffMedia(j,false);c.preventDefault()}else if(l.is(".list .groupitem .leftcolumn *, .list .groupitem .leftcolumn")){this.WP$Common$ExpandableListViewBinder$_onDomEvent(g,k,c);if(c.type===b){var m=this.getBoundModels();for(i=0;i<m.length;i++)g.ModelId!==m[i].ModelId&&this.getBoundElements(m[i]).removeClass(f)}}}if(c.type===d||c.type==="focus"){k.addClass(f);return}if(c.type===e||c.type==="blur"){k.removeClass(f);return}},_collapseOthers:function _collapseOthers(d){var c=this,b,a;b=c.getBoundModels().filter(c._isModelExpanded);for(a=0;a<b.length;a++)d.ModelId!==b[a].ModelId&&b[a].setProperty(c._statePropertyName,c._collapsed)}};h.prototype=j;$$WP.Utilities.guaranteeExistence($$WP,"Preferences.Communications");$$WP.Preferences.Communications.ConceptGroupViewBinder=h;h.extend($$WP.Common.ExpandableListViewBinder,"WP$Preferences$Communications$ConceptGroupListViewBinder")})();$$WP.Debug.UnitTest=$$WP.Debug.UnitTest||{};$$WP.Debug.UnitTest.tests=$$WP.Debug.UnitTest.tests||[];$$WP.Debug.UnitTest.tests.push(function UnitTests$ConceptGroupViewBinder(){var a;a=$$WP.Debug.UnitTest.assert})