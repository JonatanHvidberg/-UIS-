/*! Copyright (c) Epic Systems Corporation 2016-2019 */
$$WPUtil.guaranteeExistence($$WP,"Alerts.Components");$$WP.Alerts.Components.ExternalAlertsComponent=function WP$Alerts$Components$ExternalAlertsComponent(a){this.Components$TemplateComponent(a);this.addEventListener("click",this._clickEvent)};$$WP.Alerts.Components.ExternalAlertsComponent.prototype={Class:"externalalerts externalorganizations",ToolbarButtons:null,template:$$WP.Templates.Alerts.ExternalAlerts,Url:makeLink("Alerts/ExternalAlerts/Load"),setData:function $$WP$Clinical$ExternalAlerts$setData(a){var f="@MYCHART@COMMUNITYMANAGEPAGE@",d=this,c,b;if(a&&a.ExternalAlertsList&&a.InActiveCommunityList&&a.NoActionCommunityList)if(a.ExternalAlertsList.length>0||a.InActiveCommunityList.length>0||a.NoActionCommunityList.length>0){$$WP.Strings.setDefaultNamespace("alerts.externalalerts");if(a.ExternalAlertWidget!=undefined&&a.ExternalAlertWidget.CanAccessManageMyAccounts){$$WP.Strings.addMnemonic(f,makeLink("Community/Manage"));var e=$$WP.Strings.getForTemplate("pretext");if(e&&!$$WPUtil.IsNullOrEmpty(e.string))a.PreText=e;$$WP.Strings.removeMnemonic(f)}d.setTitle($$WP.Strings.getForTemplate("Title"));a.externalLoadingErrorMessage=$$WP.Strings.getForTemplate("externalLoadingErrorMessage");for(b=0;b<a.ExternalAlertsList.length;b++){c=a.ExternalAlertsList[b].Organization;$$WP.Strings.setOrganization(c);c.externalLinkTitle=$$WP.Strings.getForTemplate("externalLinkTitle");c.externalReadOnlyMessage=$$WP.Strings.getForTemplate("externalIncompleteMessage");c.IndexValue=b;$$WP.Strings.clearOrganization()}$$WP.Strings.clearDefaultNamespace();$$WP.Strings.setDefaultNamespace("community.externallinking");for(b=0;b<a.InActiveCommunityList.length;b++){c=a.InActiveCommunityList[b].Organization;$$WP.Strings.setOrganization(c);c.externalLinkTitle=$$WP.Strings.getForTemplate("OrganizationLinkTitle");c.IndexValue=b;$$WP.Strings.clearOrganization()}for(b=0;b<a.NoActionCommunityList.length;b++){c=a.NoActionCommunityList[b].Organization;$$WP.Strings.setOrganization(c);c.externalLinkTitle=$$WP.Strings.getForTemplate("NoActionOrganizationTitle");c.IndexValue=b;$$WP.Strings.clearOrganization()}$$WP.Strings.clearDefaultNamespace();d.Components$TemplateComponent$setData(a)}else{d.dispose();d.$container.remove()}},_clickEvent:function $$WP$Clinical$ExternalAlerts$_clickEvent(f){var a,i,g,b,d,c,h,e;if(f&&f.dataId==="externallink"){a=f.$target.closest(".externallink");g=a.safeAttr("data-index");i=a.safeAttr("data-org-id");h=a.safeAttr("data-patient-index");e=a.hasClass("activationlink");if(e){c=this.Data.InActiveCommunityList[g];b=c.Organization;d=$$WP.CommunityUtilities.openDeepLinkType.InPopup;if(!c.IsSignupAllowed||b.IncompleteH2GSetup||$$WP.Utilities.UI.IsMobile||WP.DOM.Browser.isMobile){$$WP.CommunityUtilities.ShowSignUpNotAllowedMessage(b);return false}}else{b=this.Data.ExternalAlertsList[g].Organization;d=$$WP.CommunityUtilities.openDeepLinkType.InNewTab}$$WP.CommunityUtilities.openDeepLink("",b,{},d,null,null,h,e);return false}}};$$WP.Alerts.Components.ExternalAlertsComponent.extend("Components.TemplateComponent")