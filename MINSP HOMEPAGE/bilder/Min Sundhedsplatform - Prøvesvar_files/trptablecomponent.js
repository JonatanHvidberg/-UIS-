/*! Copyright (c) Epic Systems Corporation 2017 */
$$WPUtil.guaranteeExistence($$WP,"Clinical.TestResultsPOC.Components");$$WP.Clinical.TestResultsPOC.Components.TRPTableComponent=function $$WP$Clinical$Components$TRPTableComponent(b){var a=this;a.RegistryID=b.RegistryID||"";a.RegistryName=b.RegistryName||"";if(a.RegistryID!=="")a.IsRegistryFilterActive=true;a.template=b.template||a.template;a.Class=b.Class;a.showSelectedTestResult=b.showSelectedTestResult;a.Components$TemplateComponent(b);a.addEventListener("click",a._componentTableClick)};$$WP.Clinical.TestResultsPOC.Components.TRPTableComponent.prototype={template:$$WP.Templates.Clinical.TRPTable,RegistryID:"",RegistryName:"",showSelectedTestResult:null,_selectedOrderID:null,_selectedParentOrderID:null,ContainerComponent:$$WPContain.CommunityListManagerContainer.prototype,_baseUrl:"Clinical/TestResults/GetHistoricalResults?",setComponentId:function $$WP$Clinical$TestResultsPOC$Components$TRPTableComponent$setComponentId(c,d,b){var a=this;a.Url=makeLink(a._baseUrl+"componentID="+encodeURIComponent(c));a._selectedOrderID=d;a._selectedParentOrderID=b;a.$content.empty();a.load(a.Url)},setData:function $$WP$Clinical$TestResultsPOC$Components$TRPTableComponent$setData(b){var j="selected",e=true,d=false,a=this;a.$content.safeAttr("tabindex",0);a.ContainerComponent.OpenedWith===""&&a.$content.focus();if(b)if(b.HistoricalValues){for(var l=b.xml,f=d,h=e,k=d,i=d,g=0;g<b.HistoricalValues.length;g++){var c=b.HistoricalValues[g];c.Url=makeLink("inside.asp?mode=labdetail&eorderid="+encodeURIComponent(c.OrderID));if(!f&&c.NumericValue!==null&&b.HistoricalValues.length>1)f=e;if(a._selectedOrderID===c.OrderID)h=d;if(c.Comment)k=e;if(c.ReferenceRange){i=e;c.AriaReferenceRange=$$WPTestResultsUtil.GetAriaReferenceRange(c)}}b.isGraphable=f;b.isComponentOutOfRange=h&&!a.IsRegistryFilterActive;b.hasComment=k;b.hasReferenceRange=i;b.IsRegistryFilterActive=a.IsRegistryFilterActive;b.parentOrderID=a._selectedParentOrderID;a.Components$TemplateComponent$setData(b);if(a._selectedOrderID)a.$content.find('[orderid="'+a._selectedOrderID+'"]').addClass(j);else a.IsRegistryFilterActive&&a.$content.find(".TRPComponentTableRow").first().addClass(j);if(f&&l){$afe.select("#TRPGraphForm").val(l);loadGraphs()}}else a.Components$TemplateComponent$setData(b)},_componentTableClick:function _componentTableClick(b){switch(b.dataId){case"testresult":var a=b.$target.safeAttr("data-index");a&&this.showSelectedTestResult(a);return false}return true}};$$WP.Clinical.TestResultsPOC.Components.TRPTableComponent.extend("Components.TemplateComponent")